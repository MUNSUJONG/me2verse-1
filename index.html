<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>Me2Verse VR 메타버스 완성형</title>
<script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
<style>
  body{margin:0; font-family: Arial, sans-serif; background:#f0f0f0;}
  header{position:fixed; top:0; left:0; width:100%; background:#333; color:white; display:flex; justify-content:space-around; padding:10px; z-index:10;}
  header button{padding:5px 10px; background:#555; border:none; border-radius:5px; color:white; cursor:pointer;}
  .screen{width:100%; height:100vh; display:none; justify-content:center; align-items:center; flex-direction:column; padding-top:60px; box-sizing:border-box;}
  #homeScreen{display:flex; background:white;}
  input, select, button{padding:10px 15px; margin:5px; border-radius:5px; border:1px solid #ccc;}
  button{cursor:pointer;}
  .storyBtn{background:#4CAF50; color:white;}
  #questLog{margin-top:10px; background:rgba(255,255,255,0.9); padding:10px; border-radius:5px; width:80%; max-width:400px; max-height:150px; overflow-y:auto; font-size:14px;}
</style>
</head>
<body>

<header>
  <button id="homeBtn">🏠 홈</button>
  <button id="storyBtn">📖 스토리 체험</button>
  <button id="walletBtn">💰 파이코인</button>
  <button id="proposalBtn">✏️ 스토리 제안</button>
</header>

<div id="homeScreen" class="screen">
  <h1>🚀 Me2Verse VR 메타버스</h1>
  <p>로그인 → 파이코인 결제 → 스토리 체험 → 기록 저장</p>
  <input type="text" id="username" placeholder="유저 이름 입력">
  <select id="amount">
    <option value="1000">1 Pi코인</option>
    <option value="5000">5 Pi코인</option>
    <option value="10000">10 Pi코인</option>
  </select><br>
  <button id="loginPayBtn">자동 로그인 + 결제</button>
  <div id="homeMsg"></div>
</div>

<div id="storyScreen" class="screen">
  <h2>스토리 체험</h2>
  <div id="storyList"></div>
  <button id="startStoryBtn" style="display:none;">체험 시작</button>
  <div id="questLog"></div>
</div>

<div id="walletScreen" class="screen">
  <h2>💰 파이코인 지갑</h2>
  <p id="walletStatus">보유 Pi코인: 0</p>
</div>

<div id="proposalScreen" class="screen">
  <h2>스토리 제안</h2>
  <textarea id="proposalText" rows="5" cols="40" placeholder="스토리 아이디어 작성"></textarea><br>
  <button id="submitProposal">제안 제출</button>
  <div id="proposalMsg"></div>
</div>

<script>
let username="", piCoin=0, currentStory="", questLogArr=[];
const homeScreen=document.getElementById("homeScreen");
const storyScreen=document.getElementById("storyScreen");
const walletScreen=document.getElementById("walletScreen");
const proposalScreen=document.getElementById("proposalScreen");
const questLogEl=document.getElementById("questLog");
const walletStatus=document.getElementById("walletStatus");
const storyListEl=document.getElementById("storyList");
const startStoryBtn=document.getElementById("startStoryBtn");

// 스토리 10개 샘플
const stories=[
  {title:"연애 모험", desc:"공원에서 캐릭터와 상호작용하며 사랑을 찾아보세요.", points:10, item:"하트"},
  {title:"우주 탐험", desc:"우주선을 타고 행성을 탐험하고 지도와 아이템을 수집하세요.", points:15, item:"행성 지도"},
  {title:"판타지 마법", desc:"마법 학교에서 마법을 배우고 퀘스트를 완수하세요.", points:12, item:"마법책"},
  {title:"미래 도시", desc:"도시를 탐험하고 NPC와 상호작용하여 포인트를 획득하세요.", points:10, item:"건물 설계도"},
  {title:"여행 체험", desc:"관광지를 돌아다니며 사진과 아이템을 수집하세요.", points:8, item:"사진"},
  {title:"아이돌 스타", desc:"무대에서 공연하며 팬과 교류하세요.", points:15, item:"팬 사인"},
  {title:"창업 경험", desc:"가상 창업을 통해 경제활동을 경험하세요.", points:12, item:"투자 계약서"},
  {title:"역사 속 체험", desc:"과거의 역사적 인물과 교류하며 사건을 체험하세요.", points:10, item:"역사 기록"},
  {title:"숲속 취미", desc:"숲속에서 산책하며 꽃과 커피를 수집하세요.", points:5, item:"꽃"},
  {title:"다국적 교류", desc:"다양한 문화의 NPC와 대화하며 아이템을 얻으세요.", points:10, item:"문화 카드"}
];

// 화면 전환 함수
function showScreen(screen){ 
  homeScreen.style.display="none";
  storyScreen.style.display="none";
  walletScreen.style.display="none";
  proposalScreen.style.display="none";
  screen.style.display="flex";
}

// 홈 버튼
document.getElementById("homeBtn").addEventListener("click",()=>showScreen(homeScreen));
document.getElementById("storyBtn").addEventListener("click",()=>showScreen(storyScreen));
document.getElementById("walletBtn").addEventListener("click",()=>{walletStatus.textContent="보유 Pi코인: "+piCoin; showScreen(walletScreen);});
document.getElementById("proposalBtn").addEventListener("click",()=>showScreen(proposalScreen));

// 로그인 + 결제
document.getElementById("loginPayBtn").addEventListener("click",()=>{
  const inputName=document.getElementById("username").value.trim();
  const amount=parseInt(document.getElementById("amount").value);
  if(!inputName){ alert("유저 이름 입력 필요!"); return; }
  username=inputName; piCoin+=amount;
  document.getElementById("homeMsg").innerText=`${username}님 로그인 성공! ${amount} Pi코인 충전 완료!`;
  walletStatus.textContent="보유 Pi코인: "+piCoin;
});

// 스토리 목록 표시
stories.forEach((s,i)=>{
  const btn=document.createElement("button");
  btn.innerText=`${s.title} (${s.points}P)`;
  btn.className="storyBtn";
  btn.addEventListener("click",()=>{
    currentStory=i; 
    startStoryBtn.style.display="inline-block"; 
    questLogArr=[]; 
    questLogEl.innerHTML="";
  });
  storyListEl.appendChild(btn);
});

// 스토리 체험 시작
startStoryBtn.addEventListener("click",()=>{
  const story=stories[currentStory];
  piCoin-=5; // 체험 비용 예시
  walletStatus.textContent="보유 Pi코인: "+piCoin;
  questLogArr.push(`스토리 체험: ${story.title} 시작`);
  questLogArr.push(`획득 아이템: ${story.item} +${story.points}P`);
  questLogEl.innerHTML=questLogArr.map(m=>`• ${m}`).join("<br>");
  startStoryBtn.style.display="none";
});

// 스토리 제안
document.getElementById("submitProposal").addEventListener("click",()=>{
  const text=document.getElementById("proposalText").value.trim();
  if(!text){ alert("제안 내용 입력 필요!"); return; }
  document.getElementById("proposalMsg").innerText="제안이 제출되었습니다! 감사합니다.";
  document.getElementById("proposalText").value="";
});

</script>
</body>
</html>
