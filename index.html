<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>Me2Verse VR ì™„ì„±í˜•</title>
<script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
<style>
body { margin:0; padding:0; font-family: Arial, sans-serif; background:#f0f0f0; }
.screen { width:100%; height:100vh; display:flex; justify-content:center; align-items:center; flex-direction:column; position:absolute; top:0; left:0; transition:all 0.5s; }
#status{position:fixed;top:10px;left:50%;transform:translateX(-50%); background:rgba(255,255,255,0.85);padding:5px 10px;border-radius:5px;font-size:16px; z-index:5;}
#score{position:fixed;bottom:10px;left:50%;transform:translateX(-50%); background:rgba(0,0,0,0.6);color:white;padding:5px 10px;border-radius:5px;font-size:16px; z-index:5;}
input,select,button{padding:10px 15px;margin:5px;font-size:16px;border-radius:5px;border:1px solid #ccc;}
button{cursor:pointer;border:none;color:white;}
#autoBtn{background-color:#2196F3;}
.moduleBtn{background-color:#4CAF50;}
#startVRBtn{background-color:#9C27B0;display:none;margin-top:10px;}
#backBtn{background-color:#FF5722;display:none;margin-top:15px;}
#nextStoryBtn{background-color:#3F51B5;display:none;margin-top:10px;}
#questLog{margin-top:15px;background:rgba(255,255,255,0.8);padding:10px;border-radius:5px;width:80%;max-width:400px;font-size:14px;max-height:150px;overflow-y:auto;}
a-scene{width:100%;height:100vh;}
</style>
</head>
<body>

<div id="status">ìƒíƒœ: ëŒ€ê¸° ì¤‘</div>
<div id="score">í¬ì¸íŠ¸: 0 | ì•„ì´í…œ: ì—†ìŒ</div>

<!-- í™ˆ í™”ë©´ -->
<div id="homeScreen" class="screen">
<h1>ğŸš€ Me2Verse VR ë©”íƒ€ë²„ìŠ¤</h1>
<p>Pi ê³„ì • ë¡œê·¸ì¸ í›„ ëª¨ë“ˆ ì„ íƒ â†’ ìŠ¤í† ë¦¬ ì²´í—˜ â†’ VR</p>
<input type="text" id="username" placeholder="Pi ê³„ì • ì´ë¦„ ì…ë ¥">
<button id="autoBtn">ë¡œê·¸ì¸</button>
</div>

<!-- ëª¨ë“ˆ ì„ íƒ í™”ë©´ -->
<div id="moduleScreen" class="screen" style="display:none;">
<h2>ëª¨ë“ˆ ì„ íƒ</h2>
<div>
<button class="moduleBtn" id="loveModule">ì—°ì•  ëª¨ë“ˆ</button>
<button class="moduleBtn" id="spaceModule">ìš°ì£¼ì²´í—˜ ëª¨ë“ˆ</button>
<button class="moduleBtn" id="hobbyModule">ì·¨ë¯¸ ëª¨ë“ˆ</button>
<button class="moduleBtn" id="beautyModule">ë¯¸íˆ¬ ë·°í‹°</button>
</div>
<div id="moduleDetail" style="margin-top:20px;">
<h3 id="moduleTitle"></h3>
<p id="moduleDesc"></p>
<button id="startVRBtn">VR ì²´í—˜ ì‹œì‘</button>
<button id="nextStoryBtn">ë‹¤ìŒ ìŠ¤í† ë¦¬</button>
<button id="backBtn">ğŸ  ë’¤ë¡œê°€ê¸°</button>
<div id="questLog"></div>
</div>
</div>

<!-- VR í™”ë©´ -->
<div id="vrScreen" class="screen" style="display:none;">
<a-scene id="vrScene">
<a-sky id="vrSky" color="#ECECEC"></a-sky>
<a-entity id="moduleContent"></a-entity>
<a-entity id="cameraRig" position="0 1.6 0">
<a-camera wasd-controls look-controls>
<a-cursor color="black"></a-cursor>
</a-camera>
</a-entity>
<a-entity light="type: ambient; intensity:0.6"></a-entity>
<a-entity light="type: directional; intensity:0.8" position="1 2 1"></a-entity>
</a-scene>
</div>

<script>
const statusEl=document.getElementById("status");
const scoreEl=document.getElementById("score");
const homeScreen=document.getElementById("homeScreen");
const moduleScreen=document.getElementById("moduleScreen");
const vrScreen=document.getElementById("vrScreen");
const moduleContent=document.getElementById("moduleContent");
const vrSky=document.getElementById("vrSky");
const moduleTitle=document.getElementById("moduleTitle");
const moduleDesc=document.getElementById("moduleDesc");
const startVRBtn=document.getElementById("startVRBtn");
const backBtn=document.getElementById("backBtn");
const nextStoryBtn=document.getElementById("nextStoryBtn");
const questLog=document.getElementById("questLog");

let points=0, items=[], currentModule="", logMessages=[], currentStoryIndex=0;

function updateScore(){ scoreEl.textContent=`í¬ì¸íŠ¸: ${points} | ì•„ì´í…œ: ${items.length?items.join(", "):"ì—†ìŒ"}`; }
function logQuest(msg){ logMessages.push(msg); questLog.innerHTML=logMessages.map(m=>`â€¢ ${m}`).join("<br>"); }

// ë¡œê·¸ì¸
document.getElementById("autoBtn").addEventListener("click",()=>{
const username=document.getElementById("username").value.trim();
if(!username){ alert("Pi ê³„ì • ì…ë ¥ í•„ìš”!"); return; }
statusEl.textContent=`ìƒíƒœ: ${username} ë¡œê·¸ì¸ ì„±ê³µ! ğŸ‰`;
homeScreen.style.display="none";
moduleScreen.style.display="flex";
});

// ëª¨ë“ˆê³¼ ìŠ¤í† ë¦¬ êµ¬ì„±
const modules={
love:{title:"ì—°ì•  ëª¨ë“ˆ", desc:"ì—°ì•  ì²´í—˜ ìŠ¤í† ë¦¬ 10ê°œ", sky:"#FFC0CB", stories:[
"ê³µì›ì—ì„œ ìºë¦­í„°ì™€ ì²« ë§Œë‚¨",
"ì¹´í˜ì—ì„œ ëŒ€í™”í•˜ë©° í˜¸ê° ìŒ“ê¸°",
"ì˜í™”ê´€ ë°ì´íŠ¸ ì²´í—˜",
"ì¶•ì œ ì°¸ê°€í•˜ë©° ì´ë²¤íŠ¸ ì¦ê¸°ê¸°",
"ê½ƒ ì„ ë¬¼ ì£¼ê³ ë°›ê¸°",
"í¸ì§€ ì „ë‹¬ ë¯¸ì…˜",
"ì»¤í”Œ ì‚¬ì§„ ì´¬ì˜",
"ë†€ì´ê³µì› ì²´í—˜",
"ì„œí”„ë¼ì´ì¦ˆ ì´ë²¤íŠ¸",
"ë§ˆì§€ë§‰ í•˜íŠ¸ íšë“"
]},
space:{title:"ìš°ì£¼ì²´í—˜ ëª¨ë“ˆ", desc:"ìš°ì£¼ íƒí—˜ ìŠ¤í† ë¦¬ 10ê°œ", sky:"#000022", stories:[
"ìš°ì£¼ì„  íƒ‘ìŠ¹",
"ë‹¬ íƒí—˜ ë¯¸ì…˜",
"í™”ì„± ê¸°ì§€ íƒí—˜",
"ì†Œí–‰ì„± ì±„ì§‘",
"ìš°ì£¼ì •ê±°ì¥ ë¯¸ì…˜",
"ì™¸ê³„ ìƒë¬¼ ê´€ì°°",
"ìœ„ì„± ì ê²€",
"ì¤‘ë ¥ ì‹¤í—˜",
"ì€í•˜ ì§€ë„ ì‘ì„±",
"ìµœì¢… í–‰ì„± ë„ì°©"
]},
hobby:{title:"ì·¨ë¯¸ ëª¨ë“ˆ", desc:"ì·¨ë¯¸ ì²´í—˜ ìŠ¤í† ë¦¬ 10ê°œ", sky:"#A0E0A0", stories:[
"ìˆ²ì† ì‚°ì±…",
"ê½ƒ ê´€ì°°",
"ì»¤í”¼ ë§Œë“¤ê¸° ì²´í—˜",
"ê·¸ë¦¼ ê·¸ë¦¬ê¸°",
"ì•…ê¸° ì—°ì£¼ ì²´í—˜",
"ìš”ë¦¬ ì²´í—˜",
"ì‚¬ì§„ ì´¬ì˜",
"ë…ì„œ ì²´í—˜",
"ìì „ê±° ì²´í—˜",
"ìì—° ê´€ì°°"
]},
beauty:{title:"ë¯¸íˆ¬ ë·°í‹°", desc:"íŒ¨ì…˜ & ë¯¸ìš© ìŠ¤í† ë¦¬ 10ê°œ", sky:"#FFD700", stories:[
"ë©”ì´í¬ì—… ì²´í—˜",
"í—¤ì–´ ìŠ¤íƒ€ì¼ë§",
"íŒ¨ì…˜ ì½”ë””ë¯¸ì…˜",
"ì‡¼í•‘ëª° ì²´í—˜",
"ë·°í‹° í´ë˜ìŠ¤ ì°¸ì—¬",
"ë„¤ì¼ì•„íŠ¸ ì²´í—˜",
"í”¼ë¶€ ê´€ë¦¬ ì²´í—˜",
"ìŠ¤íƒ€ì¼ ì‚¬ì§„ ì´¬ì˜",
"ëŸ°ì›¨ì´ ì²´í—˜",
"íŒ¨ì…˜ì‡¼ ìµœì¢… ë¯¸ì…˜"
]}
};

function selectModule(name){
currentModule=name;
currentStoryIndex=0;
moduleTitle.textContent=modules[name].title;
moduleDesc.textContent=modules[name].stories[currentStoryIndex];
startVRBtn.style.display="inline-block";
nextStoryBtn.style.display="inline-block";
backBtn.style.display="inline-block";
logMessages=[];
questLog.innerHTML="";
}

document.getElementById("loveModule").addEventListener("click",()=>selectModule("love"));
document.getElementById("spaceModule").addEventListener("click",()=>selectModule("space"));
document.getElementById("hobbyModule").addEventListener("click",()=>selectModule("hobby"));
document.getElementById("beautyModule").addEventListener("click",()=>selectModule("beauty"));

// ìŠ¤í† ë¦¬ ë‹¤ìŒ
nextStoryBtn.addEventListener("click",()=>{
if(currentModule==="") return;
currentStoryIndex++;
if(currentStoryIndex>=modules[currentModule].stories.length) currentStoryIndex=0;
moduleDesc.textContent=modules[currentModule].stories[currentStoryIndex];
});

// VR ì²´í—˜ ì‹œì‘
startVRBtn.addEventListener("click",()=>{
if(currentModule==="") return;
moduleScreen.style.display="none";
vrScreen.style.display="flex";
moduleContent.innerHTML="";
points=0; items=[]; updateScore();
logMessages=[]; questLog.innerHTML="";
vrSky.setAttribute("color",modules[currentModule].sky);

// ìŠ¤í† ë¦¬ ë‚´ìš© ê¸°ë°˜ ê°€ìƒ ì•„ë°”íƒ€/í™˜ê²½ ìƒì„± (ìƒ˜í”Œ GLTF ëª¨ë¸)
const storyName=modules[currentModule].stories[currentStoryIndex];
const avatar=document.createElement("a-gltf-model");
avatar.setAttribute("src","https://cdn.jsdelivr.net/gh/KhronosGroup/glTF-Sample-Models/2.0/Avocado/glTF/Avocado.gltf");
avatar.setAttribute("position","0 0 -3");
avatar.setAttribute("scale","0.5 0.5 0.5");
avatar.addEventListener("click",()=>{
points+=10; items.push("ì•„ì´í…œ"); updateScore(); logQuest(`ì²´í—˜ ì™„ë£Œ: ${storyName} +10ì , ì•„ì´í…œ íšë“`);
});
moduleContent.appendChild(avatar);
});

// ë’¤ë¡œê°€ê¸°
backBtn.addEventListener("click",()=>{
if(vrScreen.style.display==="flex"){
vrScreen.style.display="none";
moduleScreen.style.display="flex";
}else{
moduleScreen.style.display="none";
homeScreen.style.display="flex";
}
backBtn.style.display="none";
startVRBtn.style.display="none";
nextStoryBtn.style.display="none";
moduleContent.innerHTML="";
logMessages=[];
questLog.innerHTML="";
statusEl.textContent="ìƒíƒœ: ëŒ€ê¸° ì¤‘";
currentModule="";
currentStoryIndex=0;
});
</script>
</body>
</html>
