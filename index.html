<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>Me2Verse ì™„ì„±í˜•</title>
<script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
<style>
body { margin:0; font-family: Arial,sans-serif; background:#f0f0f0; }
.screen{width:100%; height:100vh; display:flex; flex-direction:column; align-items:center; justify-content:center; position:absolute; top:0; left:0; transition:all 0.5s;}
#homeScreen{background:#fff; z-index:3;}
#moduleScreen{background:#fafafa; display:none; z-index:2;}
#storyScreen{background:#eee; display:none; z-index:2;}
#vrScreen{background:#000; display:none; z-index:1;}
button{padding:10px 15px; margin:5px; font-size:16px; border:none; border-radius:5px; color:white; cursor:pointer;}
#loginBtn{background:#2196F3;}
.moduleBtn{background:#4CAF50;}
#startVRBtn{background:#9C27B0; display:none;}
#backBtn{background:#FF5722; display:none;}
#status{position:fixed;top:10px; left:50%; transform:translateX(-50%); background:rgba(255,255,255,0.85); padding:5px 10px; border-radius:5px; z-index:5;}
#score{position:fixed; bottom:10px; left:50%; transform:translateX(-50%); background:rgba(0,0,0,0.6); color:white; padding:5px 10px; border-radius:5px; z-index:5;}
#storyLog{margin-top:10px; max-height:200px; overflow-y:auto; background:rgba(255,255,255,0.8); padding:10px; border-radius:5px; width:80%;}
</style>
</head>
<body>

<div id="status">ìƒíƒœ: ëŒ€ê¸° ì¤‘</div>
<div id="score">í¬ì¸íŠ¸: 0 | ì•„ì´í…œ: ì—†ìŒ</div>

<!-- í™ˆ í™”ë©´ -->
<div id="homeScreen" class="screen">
  <h1>ğŸš€ Me2Verse</h1>
  <p>Pi ê³„ì • ë¡œê·¸ì¸ í›„ ëª¨ë“ˆ ì„ íƒ</p>
  <input type="text" id="username" placeholder="Pi ê³„ì • ì…ë ¥">
  <button id="loginBtn">ë¡œê·¸ì¸</button>
</div>

<!-- ëª¨ë“ˆ ì„ íƒ -->
<div id="moduleScreen" class="screen">
  <h2>ëª¨ë“ˆ ì„ íƒ</h2>
  <div>
    <button class="moduleBtn" data-mod="love">ì—°ì•  ëª¨ë“ˆ</button>
    <button class="moduleBtn" data-mod="space">ìš°ì£¼ì²´í—˜</button>
    <button class="moduleBtn" data-mod="hobby">ì·¨ë¯¸ ëª¨ë“ˆ</button>
    <button class="moduleBtn" data-mod="beauty">ë¯¸íˆ¬ ë·°í‹°</button>
  </div>
  <button id="backBtn">ğŸ  ë’¤ë¡œê°€ê¸°</button>
</div>

<!-- ìŠ¤í† ë¦¬ í™”ë©´ -->
<div id="storyScreen" class="screen">
  <h2 id="storyTitle">ìŠ¤í† ë¦¬ ì œëª©</h2>
  <p id="storyDesc">ìŠ¤í† ë¦¬ ì„¤ëª…</p>
  <button id="startVRBtn">VR ì²´í—˜ ì‹œì‘</button>
  <button id="backToModuleBtn">ë’¤ë¡œê°€ê¸°</button>
  <div id="storyLog"></div>
</div>

<!-- VR í™”ë©´ -->
<div id="vrScreen" class="screen">
  <a-scene id="vrScene">
    <a-sky id="vrSky" color="#ECECEC"></a-sky>
    <a-entity id="vrContent"></a-entity>
    <a-entity id="cameraRig" position="0 1.6 0">
      <a-camera wasd-controls look-controls>
        <a-cursor color="black"></a-cursor>
      </a-camera>
    </a-entity>
    <a-entity light="type: ambient; intensity:0.6"></a-entity>
    <a-entity light="type: directional; intensity:0.8" position="1 2 1"></a-entity>
  </a-scene>
  <button id="backFromVR" style="position:absolute; top:10px; left:10px; z-index:10;">ë’¤ë¡œê°€ê¸°</button>
</div>

<script>
let currentUser="", currentModule="", points=0, items=[], logMessages=[];
const statusEl=document.getElementById("status");
const scoreEl=document.getElementById("score");
const homeScreen=document.getElementById("homeScreen");
const moduleScreen=document.getElementById("moduleScreen");
const storyScreen=document.getElementById("storyScreen");
const vrScreen=document.getElementById("vrScreen");
const storyTitle=document.getElementById("storyTitle");
const storyDesc=document.getElementById("storyDesc");
const storyLog=document.getElementById("storyLog");
const vrSky=document.getElementById("vrSky");
const vrContent=document.getElementById("vrContent");

function updateScore(){ scoreEl.textContent=`í¬ì¸íŠ¸: ${points} | ì•„ì´í…œ: ${items.length?items.join(", "):"ì—†ìŒ"}`; }
function logStory(msg){ logMessages.push(msg); storyLog.innerHTML=logMessages.map(m=>"â€¢ "+m).join("<br>"); }

// ë¡œê·¸ì¸
document.getElementById("loginBtn").addEventListener("click",()=>{
  const uname=document.getElementById("username").value.trim();
  if(!uname){ alert("Pi ê³„ì • ì…ë ¥ í•„ìš”"); return; }
  currentUser=uname;
  statusEl.textContent=`ìƒíƒœ: ${currentUser} ë¡œê·¸ì¸ ì„±ê³µ!`;
  homeScreen.style.display="none";
  moduleScreen.style.display="flex";
});

// ëª¨ë“ˆ ì •ì˜
const modules={
love:{title:"ì—°ì•  ëª¨ë“ˆ", desc:"ê³µì›ì—ì„œ ìºë¦­í„°ì™€ ìƒí˜¸ì‘ìš©í•˜ë©° ì—°ì•  ì²´í—˜! 10ê°œ ìŠ¤í† ë¦¬ í¬í•¨", stories:[
{title:"ì²« ë§Œë‚¨",desc:"ê³µì›ì—ì„œ ìºë¦­í„°1ê³¼ ì¸ì‚¬"}, {title:"ë°ì´íŠ¸ ì¤€ë¹„",desc:"ì»¤í”¼ë¥¼ ì¤€ë¹„í•˜ë©° ìºë¦­í„°2ì™€ ëŒ€í™”"},
{title:"ì‚°ì±…",desc:"í•¨ê»˜ ì‚°ì±…í•˜ë©° í•˜íŠ¸ íšë“"}, {title:"ë†€ì´ê³µì›",desc:"ë†€ì´ê³µì›ì—ì„œ ì¦ê±°ìš´ ì‹œê°„"},
{title:"ì˜í™” ê´€ëŒ",desc:"ìºë¦­í„°ì™€ ì˜í™” ë³´ê¸°"}, {title:"ì„ ë¬¼ êµí™˜",desc:"í•˜íŠ¸ë¥¼ ì„ ë¬¼ë¡œ êµí™˜"},
{title:"ë ˆìŠ¤í† ë‘",desc:"ì €ë…ì‹ì‚¬ ì²´í—˜"}, {title:"ë°¤í•˜ëŠ˜ ì‚°ì±…",desc:"ë³„ ë³´ë©° ëŒ€í™”"},
{title:"ì‚¬ì§„ ì´¬ì˜",desc:"ìºë¦­í„°ì™€ ì‚¬ì§„ ì°ê¸°"}, {title:"ë§ˆì§€ë§‰ ì¸ì‚¬",desc:"ë‹¤ìŒ ë§Œë‚¨ ì•½ì†"}]},
space:{title:"ìš°ì£¼ì²´í—˜", desc:"íƒì‚¬ì„  íƒ‘ìŠ¹ â†’ í–‰ì„± íƒí—˜ â†’ 10ê°œ ìŠ¤í† ë¦¬", stories:[
{title:"íƒì‚¬ì„  íƒ‘ìŠ¹",desc:"íƒì‚¬ì„  íƒ‘ìŠ¹ ì¤€ë¹„"}, {title:"í–‰ì„± ë„ì°©",desc:"í–‰ì„±1 íƒí—˜ ì‹œì‘"},
{title:"í¬ë ˆì´í„° ê´€ì°°",desc:"í–‰ì„± ì§€í˜• ê´€ì°°"}, {title:"ìì› ìˆ˜ì§‘",desc:"ìì› ì±„ì§‘"},
{title:"ì¤‘ë ¥ ì²´í—˜",desc:"ì¤‘ë ¥ ë³€í™”ë¥¼ ê²½í—˜"}, {title:"ìœ„ì„± ê´€ì¸¡",desc:"ìœ„ì„± ë°ì´í„° ìˆ˜ì§‘"},
{title:"ìƒëª…ì²´ ë°œê²¬",desc:"ì™¸ê³„ ìƒëª…ì²´ íƒí—˜"}, {title:"ìš°ì£¼ì„  ìˆ˜ë¦¬",desc:"ìˆ˜ë¦¬ ì²´í—˜"},
{title:"ê·€í™˜ ì¤€ë¹„",desc:"ì§€êµ¬ ê·€í™˜ ì¤€ë¹„"}, {title:"ê·€í™˜",desc:"ì§€êµ¬ë¡œ ê·€í™˜ ì™„ë£Œ"}]},
hobby:{title:"ì·¨ë¯¸ ëª¨ë“ˆ", desc:"ìˆ²ì† ì‚°ì±…, ì·¨ë¯¸ í™œë™ 10ê°œ ìŠ¤í† ë¦¬", stories:[
{title:"ì•„ì¹¨ ì‚°ì±…",desc:"ìˆ²ì† ì‚°ì±… ì‹œì‘"}, {title:"ê½ƒ ê´€ì°°",desc:"ê½ƒ ì¢…ë¥˜ í™•ì¸"},
{title:"ì‚¬ì§„ ì´¬ì˜",desc:"ìì—° ì† ì‚¬ì§„ ì´¬ì˜"}, {title:"ì»¤í”¼ ì¤€ë¹„",desc:"ìˆ²ì† ì»¤í”¼ ì²´í—˜"},
{title:"ë“œë¡œì‰",desc:"ë‚˜ë¬´ ì•„ë˜ ë“œë¡œì‰"}, {title:"ìš”ê°€",desc:"ìì—° ì† ìš”ê°€ ì²´í—˜"},
{title:"ìƒˆ ê´€ì°°",desc:"ìƒˆ ì¢…ë¥˜ í™•ì¸"}, {title:"ë‚šì‹œ ì²´í—˜",desc:"í˜¸ìˆ˜ì—ì„œ ë‚šì‹œ"},
{title:"í”¼í¬ë‹‰",desc:"í”¼í¬ë‹‰ ì¦ê¸°ê¸°"}, {title:"ëª…ìƒ",desc:"ìˆ²ì† ëª…ìƒ ì™„ë£Œ"}]},
beauty:{title:"ë¯¸íˆ¬ ë·°í‹°", desc:"íŒ¨ì…˜/ë¯¸ìš© ì²´í—˜ 10ê°œ ìŠ¤í† ë¦¬", stories:[
{title:"í—¤ì–´ìŠ¤íƒ€ì¼",desc:"í—¤ì–´ìŠ¤íƒ€ì¼ ë³€í™” ì²´í—˜"}, {title:"ë©”ì´í¬ì—…",desc:"í™”ì¥ ì²´í—˜"},
{title:"íŒ¨ì…˜ ì½”ë””",desc:"ì˜ìƒ ì„ íƒ ì²´í—˜"}, {title:"ë„¤ì¼ì•„íŠ¸",desc:"ë„¤ì¼ ì²´í—˜"},
{title:"í–¥ìˆ˜ ì„ íƒ",desc:"í–¥ìˆ˜ ì²´í—˜"}, {title:"í”¼ë¶€ê´€ë¦¬",desc:"ìŠ¤í‚¨ì¼€ì–´ ì²´í—˜"},
{title:"ì‡¼í•‘",desc:"ì•„ì´í…œ ì‡¼í•‘ ì²´í—˜"}, {title:"ì‚¬ì§„ì´¬ì˜",desc:"ìŠ¤íƒ€ì¼ ì‚¬ì§„ ì´¬ì˜"},
{title:"ëŸ°ì›¨ì´ ì²´í—˜",desc:"ëŸ°ì›¨ì´ ì›Œí‚¹ ì²´í—˜"}, {title:"ìµœì¢… ìŠ¤íƒ€ì¼",desc:"ìµœì¢… ìŠ¤íƒ€ì¼ ì™„ì„±"}]}
};

// ëª¨ë“ˆ ì„ íƒ
document.querySelectorAll(".moduleBtn").forEach(btn=>{
  btn.addEventListener("click",()=>{
    currentModule=btn.dataset.mod;
    const mod=modules[currentModule];
    storyTitle.textContent=mod.title;
    storyDesc.textContent=mod.desc;
    logMessages=[];
    storyLog.innerHTML="";
    storyScreen.style.display="flex";
    moduleScreen.style.display="none";
    document.getElementById("startVRBtn").style.display="inline-block";
    backBtn.style.display="inline-block";
  });
});

// ë’¤ë¡œê°€ê¸°
document.getElementById("backBtn").addEventListener("click",()=>{
  moduleScreen.style.display="none";
  homeScreen.style.display="flex";
  backBtn.style.display="none";
});
document.getElementById("backToModuleBtn").addEventListener("click",()=>{
  storyScreen.style.display="none";
  moduleScreen.style.display="flex";
});

// VR ì‹œì‘
document.getElementById("startVRBtn").addEventListener("click",()=>{
  storyScreen.style.display="none";
  vrScreen.style.display="flex";
  vrContent.innerHTML="";
  points=0; items=[]; updateScore();
  const mod=modules[currentModule];
  vrSky.setAttribute("color","#"+Math.floor(Math.random()*16777215).toString(16));
  // ì•„ë°”íƒ€/í™˜ê²½ ìƒì„±
  mod.stories.forEach((s,i)=>{
    const el=document.createElement("a-box");
    el.setAttribute("position",(i%5-2)+" 0.5 "+(-3-i));
    el.setAttribute("depth","0.5"); el.setAttribute("height","1"); el.setAttribute("width","0.5");
    el.setAttribute("color","#"+Math.floor(Math.random()*16777215).toString(16));
    el.addEventListener("click",()=>{
      points+=10; items.push(s.title); updateScore(); logStory("ì²´í—˜ ì™„ë£Œ: "+s.title);
    });
    vrContent.appendChild(el);
  });
});

// VR ë’¤ë¡œê°€ê¸°
document.getElementById("backFromVR").addEventListener("click",()=>{
  vrScreen.style.display="none";
  storyScreen.style.display="flex";
});
</script>
</body>
</html>
