<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>Me2Verse ì™„ì „ ë©”íƒ€ë²„ìŠ¤ ì•±</title>
<script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
<style>
body{margin:0;font-family:Arial,sans-serif;background:#f0f0f0;}
#status{position:fixed;top:10px;left:50%;transform:translateX(-50%);background:rgba(255,255,255,0.85);padding:5px 10px;border-radius:5px;font-size:16px;z-index:5;}
#score{position:fixed;bottom:10px;left:50%;transform:translateX(-50%);background:rgba(0,0,0,0.6);color:white;padding:5px 10px;border-radius:5px;font-size:16px;z-index:5;}
.screen{width:100%;height:100vh;display:flex;justify-content:center;align-items:center;flex-direction:column;transition:all 0.5s;position:absolute;top:0;left:0;}
#homeScreen{background:white;z-index:4;}
#moduleScreen{background:#fafafa;display:none;z-index:3;}
#vrScreen{background:black;display:none;z-index:2;}
input,select,button{padding:10px 15px;margin:5px;font-size:16px;border-radius:5px;border:1px solid #ccc;}
button{cursor:pointer;border:none;color:white;}
#autoBtn{background-color:#2196F3;}
.moduleBtn{background-color:#4CAF50;}
#startVRBtn{background-color:#9C27B0;display:none;margin-top:10px;}
#backBtn{background-color:#FF5722;display:none;margin-top:15px;}
#questLog{margin-top:15px;background:rgba(255,255,255,0.8);padding:10px;border-radius:5px;width:80%;max-width:400px;font-size:14px;max-height:150px;overflow-y:auto;}
#flagContainer{position:fixed;top:10px;width:100%;display:flex;justify-content:space-between;padding:0 20px;z-index:5;}
#flagContainer img{width:80px;}
a-scene{width:100%;height:100vh;}
</style>
</head>
<body>

<div id="flagContainer">
<img src="https://upload.wikimedia.org/wikipedia/commons/0/09/Flag_of_South_Korea.svg" alt="íƒœê·¹ê¸°">
<img src="https://upload.wikimedia.org/wikipedia/commons/0/09/Flag_of_South_Korea.svg" alt="íƒœê·¹ê¸°">
</div>

<div id="status">ìƒíƒœ: ëŒ€ê¸° ì¤‘</div>
<div id="score">Piì½”ì¸: 0 | ì•„ì´í…œ: ì—†ìŒ</div>

<!-- í™ˆ í™”ë©´ -->
<div id="homeScreen" class="screen">
<h1>ğŸš€ Me2Verse ë©”íƒ€ë²„ìŠ¤</h1>
<p>ë¡œê·¸ì¸ â†’ Piì½”ì¸ ê²°ì œ â†’ ëª¨ë“ˆ ì„ íƒ â†’ VR ì²´í—˜</p>
<input type="text" id="username" placeholder="ìœ ì € ì´ë¦„ ì…ë ¥">
<select id="amount">
<option value="1">1 Piì½”ì¸</option>
<option value="5">5 Piì½”ì¸</option>
<option value="10">10 Piì½”ì¸</option>
</select><br/>
<button id="autoBtn">ìë™ ë¡œê·¸ì¸ + ê²°ì œ</button>
</div>

<!-- ëª¨ë“ˆ ì„ íƒ í™”ë©´ -->
<div id="moduleScreen" class="screen">
<h2>ëª¨ë“ˆ ì„ íƒ</h2>
<div>
<button class="moduleBtn" id="loveModule">ì—°ì•  ëª¨ë“ˆ</button>
<button class="moduleBtn" id="spaceModule">ìš°ì£¼ì²´í—˜ ëª¨ë“ˆ</button>
<button class="moduleBtn" id="hobbyModule">ì·¨ë¯¸ ëª¨ë“ˆ</button>
</div>
<div id="moduleDetail" style="margin-top:20px;">
<h3 id="moduleTitle"></h3>
<p id="moduleDesc"></p>
<button id="startVRBtn">VR ì²´í—˜ ì‹œì‘</button>
<button id="backBtn">ğŸ  ë’¤ë¡œê°€ê¸°</button>
<div id="questLog"></div>
</div>
</div>

<!-- VR í™”ë©´ -->
<div id="vrScreen" class="screen">
<a-scene id="vrScene">
<a-sky id="vrSky" color="#ECECEC"></a-sky>
<a-entity id="moduleContent"></a-entity>
<a-entity id="cameraRig" position="0 1.6 0">
<a-camera wasd-controls look-controls>
<a-cursor color="black"></a-cursor>
</a-camera>
</a-entity>
<a-entity light="type: ambient; intensity:0.6"></a-entity>
<a-entity light="type: directional; intensity:0.8" position="1 2 1"></a-entity>
</a-scene>
</div>

<script>
const statusEl=document.getElementById("status");
const scoreEl=document.getElementById("score");
const homeScreen=document.getElementById("homeScreen");
const moduleScreen=document.getElementById("moduleScreen");
const vrScreen=document.getElementById("vrScreen");
const moduleContent=document.getElementById("moduleContent");
const vrSky=document.getElementById("vrSky");
const moduleTitle=document.getElementById("moduleTitle");
const moduleDesc=document.getElementById("moduleDesc");
const startVRBtn=document.getElementById("startVRBtn");
const backBtn=document.getElementById("backBtn");
const questLog=document.getElementById("questLog");

let points=0, items=[], currentModule="", logMessages=[];

function updateScore(){ scoreEl.textContent=`Piì½”ì¸: ${points} | ì•„ì´í…œ: ${items.length?items.join(", "):"ì—†ìŒ"}`; }
function logQuest(msg){ logMessages.push(msg); questLog.innerHTML=logMessages.map(m=>`â€¢ ${m}`).join("<br>"); }

// ë¡œê·¸ì¸ + Piì½”ì¸ ê²°ì œ
document.getElementById("autoBtn").addEventListener("click",()=>{
  const username=document.getElementById("username").value.trim();
  const amount=document.getElementById("amount").value;
  if(!username){ alert("ìœ ì € ì´ë¦„ ì…ë ¥ í•„ìš”!"); return; }
  statusEl.textContent=`ìƒíƒœ: ${username} ë¡œê·¸ì¸ ì¤‘...`;
  setTimeout(()=>{
    statusEl.textContent=`ìƒíƒœ: ${username} ë¡œê·¸ì¸ ì„±ê³µ! ğŸ‰`;
    statusEl.textContent=`ìƒíƒœ: ${amount} Piì½”ì¸ ê²°ì œ ì²˜ë¦¬ ì¤‘...`;
    setTimeout(()=>{
      statusEl.textContent=`ìƒíƒœ: ${username} ê²°ì œ ì™„ë£Œ! ğŸ’°`;
      alert(`${username}ë‹˜ì˜ ${amount} Piì½”ì¸ ê²°ì œê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!`);
      homeScreen.style.display="none";
      moduleScreen.style.display="flex";
    },1500);
  },1000);
});

// ëª¨ë“ˆ ì •ì˜ (GLB ì•„ë°”íƒ€, ì‹œë‚˜ë¦¬ì˜¤)
const modules={
love:{
title:"ì—°ì•  ëª¨ë“ˆ",
desc:"ê³µì›ì—ì„œ ìºë¦­í„°ì™€ ìƒí˜¸ì‘ìš©í•˜ë©° ì—°ì•  ì²´í—˜! í•˜íŠ¸ë¥¼ ëª¨ì•„ë³´ì„¸ìš”.",
sky:"#FFC0CB",
avatars:[
{model:"https://cdn.jsdelivr.net/gh/KhronosGroup/glTF-Sample-Models/2.0/Avocado/glTF/Avocado.gltf", pos:"-1 0 -3", log:"ğŸ’Œ ìºë¦­í„°1 ëŒ€í™” ì™„ë£Œ! +10ì , í•˜íŠ¸ íšë“", points:10, item:"í•˜íŠ¸"},
{model:"https://cdn.jsdelivr.net/gh/KhronosGroup/glTF-Sample-Models/2.0/Duck/glTF/Duck.gltf", pos:"1 0 -3", log:"ğŸ’Œ ìºë¦­í„°2 ëŒ€í™” ì™„ë£Œ! +10ì , í•˜íŠ¸ íšë“", points:10, item:"í•˜íŠ¸"}
],
props:[
{model:"https://cdn.jsdelivr.net/gh/KhronosGroup/glTF-Sample-Models/2.0/Cube/glTF/Cube.gltf", pos:"0 0 -4", log:"ğŸŒ¸ ê½ƒ ê´€ì°° ì™„ë£Œ! +5ì , ê½ƒ íšë“", points:5, item:"ê½ƒ"}
]
},
space:{
title:"ìš°ì£¼ì²´í—˜ ëª¨ë“ˆ",
desc:"íƒì‚¬ì„  íƒ‘ìŠ¹ â†’ í–‰ì„± íƒí—˜ â†’ ì§€ë„, ì•„ì´í…œ ìˆ˜ì§‘!",
sky:"#000022",
avatars:[
{model:"https://cdn.jsdelivr.net/gh/KhronosGroup/glTF-Sample-Models/2.0/Avocado/glTF/Avocado.gltf", pos:"-1 0 -4", log:"ğŸª í–‰ì„±1 íƒí—˜ ì™„ë£Œ! +15ì , ì§€ë„ íšë“", points:15, item:"í–‰ì„± ì§€ë„"},
{model:"https://cdn.jsdelivr.net/gh/KhronosGroup/glTF-Sample-Models/2.0/Duck/glTF/Duck.gltf", pos:"1 0 -4", log:"ğŸª í–‰ì„±2 íƒí—˜ ì™„ë£Œ! +15ì , ì§€ë„ íšë“", points:15, item:"í–‰ì„± ì§€ë„"}
],
props:[
{model:"https://cdn.jsdelivr.net/gh/KhronosGroup/glTF-Sample-Models/2.0/Cube/glTF/Cube.gltf", pos:"0 0 -5", log:"ğŸ ë³´ë„ˆìŠ¤ ì¥ë¹„ íšë“! +25ì , ìš°ì£¼ ì¥ë¹„", points:25, item:"ìš°ì£¼ ì¥ë¹„"}
]
},
hobby:{
title:"ì·¨ë¯¸ ëª¨ë“ˆ",
desc:"ìˆ²ì† ì‚°ì±…ê³¼ ì·¨ë¯¸ í™œë™ VR ì²´í—˜! ê½ƒê³¼ ì»¤í”¼ë¥¼ ìˆ˜ì§‘í•˜ì„¸ìš”.",
sky:"#A0E0A0",
avatars:[
{model:"https://cdn.jsdelivr.net/gh/KhronosGroup/glTF-Sample-Models/2.0/Avocado/glTF/Avocado.gltf", pos:"-1 0 -3", log:"ğŸŒ³ ê½ƒ ê´€ì°° ì™„ë£Œ! +5ì , ê½ƒ íšë“", points:5, item:"ê½ƒ"},
{model:"https://cdn.jsdelivr.net/gh/KhronosGroup/glTF-Sample-Models/2.0/Duck/glTF/Duck.gltf", pos:"1 0 -3", log:"ğŸª‘ ë²¤ì¹˜ íœ´ì‹ ì™„ë£Œ! +5ì , ì»¤í”¼ íšë“", points:5, item:"ì»¤í”¼"}
],
props:[
{model:"https://cdn.jsdelivr.net/gh/KhronosGroup/glTF-Sample-Models/2.0/Cube/glTF/Cube.gltf", pos:"0 0 -4", log:"ğŸ ë³´ë„ˆìŠ¤ ì—´ë§¤ ë°œê²¬! +15ì , ì—´ë§¤ íšë“", points:15, item:"ì—´ë§¤"}
]
}
};

function selectModule(name){
currentModule=name;
moduleTitle.textContent=modules[name].title;
moduleDesc.textContent=modules[name].desc;
startVRBtn.style.display="inline-block";
backBtn.style.display="inline-block";
logMessages=[];
questLog.innerHTML="";
}

document.getElementById("loveModule").addEventListener("click",()=>selectModule("love"));
document.getElementById("spaceModule").addEventListener("click",()=>selectModule("space"));
document.getElementById("hobbyModule").addEventListener("click",()=>selectModule("hobby"));

// VR ì²´í—˜ ì‹œì‘
startVRBtn.addEventListener("click",()=>{
moduleScreen.style.display="none";
vrScreen.style.display="flex";
moduleContent.innerHTML="";
points=0; items=[]; updateScore();
logMessages=[]; questLog.innerHTML="";

const mod=modules[currentModule];
vrSky.setAttribute("color",mod.sky);

// ì•„ë°”íƒ€ ìƒì„±
mod.avatars.forEach(obj=>{
const el=document.createElement("a-entity");
el.setAttribute("gltf-model",obj.model);
el.setAttribute("position",obj.pos);
el.setAttribute("scale","0.5 0.5 0.5");
el.setAttribute("animation__hover","property=rotation;to=0 360 0;loop=true;dur=4000;easing=linear");
el.addEventListener("click",()=>{
points+=obj.points; items.push(obj.item); updateScore(); logQuest(obj.log);
});
moduleContent.appendChild(el);
});

// ì†Œí’ˆ ìƒì„±
mod.props.forEach(obj=>{
const el=document.createElement("a-entity");
el.setAttribute("gltf-model",obj.model);
el.setAttribute("position",obj.pos);
el.setAttribute("scale","0.3 0.3 0.3");
el.setAttribute("animation__hover","property=rotation;to=0 360 0;loop=true;dur=4000;easing=linear");
el.addEventListener("click",()=>{
points+=obj.points; items.push(obj.item); updateScore(); logQuest(obj
