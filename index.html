<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>Me2Verse VR ë©”íƒ€ë²„ìŠ¤ ì™„ì„±í˜•</title>
<script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
<style>
body { margin:0; padding:0; font-family: Arial, sans-serif; background:#f0f0f0; }
.screen { width:100%; height:100vh; display:flex; flex-direction:column; justify-content:center; align-items:center; position:absolute; top:0; left:0; transition: all 0.5s; }
#status{position:fixed;top:10px;left:50%;transform:translateX(-50%);background:rgba(255,255,255,0.85);padding:5px 10px;border-radius:5px;font-size:16px; z-index:5;}
#score{position:fixed;bottom:10px;left:50%;transform:translateX(-50%);background:rgba(0,0,0,0.6);color:white;padding:5px 10px;border-radius:5px;font-size:16px; z-index:5;}
input, select, button { padding:10px 15px; margin:5px; font-size:16px; border-radius:5px; border:1px solid #ccc;}
button { cursor:pointer; border:none; color:white;}
#loginBtn{background-color:#2196F3;}
.moduleBtn{background-color:#4CAF50;}
#startVRBtn{background-color:#9C27B0; display:none; margin-top:10px;}
#backBtn{background-color:#FF5722; display:none; margin-top:10px;}
#storyList{margin-top:15px; width:80%; max-width:500px; max-height:300px; overflow-y:auto; background:rgba(255,255,255,0.9); padding:10px; border-radius:5px;}
#storyContent{margin-top:10px; width:80%; max-width:500px; background:rgba(255,255,255,0.9); padding:10px; border-radius:5px;}
a-scene{width:100%;height:100vh;}
</style>
</head>
<body>

<div id="status">ìƒíƒœ: ëŒ€ê¸° ì¤‘</div>
<div id="score">í¬ì¸íŠ¸: 0 | ì•„ì´í…œ: ì—†ìŒ</div>

<!-- í™ˆ í™”ë©´ -->
<div id="homeScreen" class="screen" style="background:#ffffff; z-index:3;">
<h1>ğŸš€ Me2Verse VR ë©”íƒ€ë²„ìŠ¤</h1>
<p>íŒŒì´ ê³„ì • ë¡œê·¸ì¸ í›„ ëª¨ë“ˆ ì²´í—˜</p>
<input type="text" id="username" placeholder="íŒŒì´ ê³„ì • ì´ë¦„ ì…ë ¥">
<button id="loginBtn">ë¡œê·¸ì¸</button>
</div>

<!-- ëª¨ë“ˆ ì„ íƒ í™”ë©´ -->
<div id="moduleScreen" class="screen" style="display:none; background:#fafafa; z-index:2;">
<h2>ëª¨ë“ˆ ì„ íƒ</h2>
<div>
<button class="moduleBtn" id="loveModule">ì—°ì•  ëª¨ë“ˆ</button>
<button class="moduleBtn" id="spaceModule">ìš°ì£¼ì²´í—˜ ëª¨ë“ˆ</button>
<button class="moduleBtn" id="hobbyModule">ì·¨ë¯¸ ëª¨ë“ˆ</button>
</div>
<button id="backBtn">ğŸ  í™ˆìœ¼ë¡œ</button>
<div id="storyList"></div>
<div id="storyContent">
<h3 id="storyTitle"></h3>
<p id="storyDesc"></p>
<button id="startVRBtn">VR ì²´í—˜ ì‹œì‘</button>
</div>
</div>

<!-- VR í™”ë©´ -->
<div id="vrScreen" class="screen" style="display:none; background:black; z-index:1;">
<a-scene id="vrScene">
<a-sky id="vrSky" color="#ECECEC"></a-sky>
<a-entity id="moduleContent"></a-entity>
<a-entity id="cameraRig" position="0 1.6 0">
<a-camera wasd-controls look-controls>
<a-cursor color="black"></a-cursor>
</a-camera>
</a-entity>
<a-entity light="type: ambient; intensity:0.6"></a-entity>
<a-entity light="type: directional; intensity:0.8" position="1 2 1"></a-entity>
</a-scene>
<button id="backVRBtn" style="position:absolute;top:10px;left:10px; z-index:10; background:#FF5722; color:white; padding:10px;border:none;">ìŠ¤í† ë¦¬ë¡œ ëŒì•„ê°€ê¸°</button>
</div>

<script>
const statusEl=document.getElementById("status");
const scoreEl=document.getElementById("score");
const homeScreen=document.getElementById("homeScreen");
const moduleScreen=document.getElementById("moduleScreen");
const vrScreen=document.getElementById("vrScreen");
const moduleContent=document.getElementById("moduleContent");
const vrSky=document.getElementById("vrSky");
const storyList=document.getElementById("storyList");
const storyTitle=document.getElementById("storyTitle");
const storyDesc=document.getElementById("storyDesc");
const startVRBtn=document.getElementById("startVRBtn");
const backBtn=document.getElementById("backBtn");
const backVRBtn=document.getElementById("backVRBtn");

let points=0, items=[], currentModule="", currentStory=null;

function updateScore(){ scoreEl.textContent=`í¬ì¸íŠ¸: ${points} | ì•„ì´í…œ: ${items.length?items.join(", "):"ì—†ìŒ"}`; }

// ë¡œê·¸ì¸
document.getElementById("loginBtn").addEventListener("click",()=>{
const username=document.getElementById("username").value.trim();
if(!username){ alert("íŒŒì´ ê³„ì • ì´ë¦„ ì…ë ¥ í•„ìš”!"); return; }
statusEl.textContent=`${username} ë¡œê·¸ì¸ ì„±ê³µ! ğŸ‰`;
homeScreen.style.display="none";
moduleScreen.style.display="flex";
});

// ëª¨ë“ˆë³„ ìŠ¤í† ë¦¬ ì •ì˜ (ê° 5ê°œ ì˜ˆì‹œ)
const modules={
love:{
title:"ì—°ì•  ëª¨ë“ˆ",
sky:"#FFC0CB",
stories:[
{title:"ê³µì› ì‚°ì±…", desc:"ìºë¦­í„°ì™€ ê³µì›ì—ì„œ ë°ì´íŠ¸ë¥¼ í•˜ë©° í•˜íŠ¸ë¥¼ ëª¨ì•„ë³´ì„¸ìš”.", points:10, item:"í•˜íŠ¸"},
{title:"ì¹´í˜ ë°ì´íŠ¸", desc:"ì»¤í”¼ì™€ ëŒ€í™”ë¥¼ ì¦ê¸°ë©° ì¹œë°€ë„ë¥¼ ì˜¬ë¦¬ì„¸ìš”.", points:15, item:"ì»¤í”¼"},
{title:"ì˜í™”ê´€ ë°ì´íŠ¸", desc:"ì˜í™” ì„ íƒê³¼ ëŒ€í™”ë¥¼ í†µí•´ ìŠ¤í† ë¦¬ ì§„í–‰", points:20, item:"íŒì½˜"},
{title:"ì¶•ì œ ì²´í—˜", desc:"ì¶•ì œì—ì„œ ìºë¦­í„°ì™€ ë¯¸ì…˜ ìˆ˜í–‰", points:25, item:"í’ì„ "},
{title:"ë°¤í•˜ëŠ˜ ë°ì´íŠ¸", desc:"ë³„ë¹› ì•„ë˜ ì´ë²¤íŠ¸ ì™„ë£Œ", points:30, item:"ë³„"}
]},
space:{
title:"ìš°ì£¼ì²´í—˜ ëª¨ë“ˆ",
sky:"#000022",
stories:[
{title:"ìš°ì£¼ì„  íƒ‘ìŠ¹", desc:"íƒ‘ìŠ¹ í›„ ì¡°ì¢… í›ˆë ¨", points:15, item:"ì¡°ì¢…í‚¤"},
{title:"ë‹¬ íƒí—˜", desc:"ë‹¬ ì§€í˜• íƒì‚¬", points:20, item:"ë‹¬ í‘œë³¸"},
{title:"í™”ì„± íƒí—˜", desc:"í™”ì„± ê¸°ì§€ ë„ì°© í›„ ìë£Œ ìˆ˜ì§‘", points:25, item:"í™”ì„± ì§€ë„"},
{title:"ì†Œí–‰ì„± ë²¨íŠ¸", desc:"íƒí—˜ ë° ìì› ìˆ˜ì§‘", points:30, item:"ê´‘ë¬¼"},
{title:"ì€í•˜ ì—¬í–‰", desc:"ì€í•˜ê³„ ì—¬í–‰ ì²´í—˜ ì™„ë£Œ", points:40, item:"ì€í•˜ ì§€ë„"}
]},
hobby:{
title:"ì·¨ë¯¸ ëª¨ë“ˆ",
sky:"#A0E0A0",
stories:[
{title:"ìˆ²ì† ì‚°ì±…", desc:"ê½ƒê³¼ ë‚˜ë¬´ ê´€ì°°í•˜ë©° í¬ì¸íŠ¸ íšë“", points:5, item:"ê½ƒ"},
{title:"ì»¤í”¼ ë§Œë“¤ê¸°", desc:"ì»¤í”¼ ë§Œë“¤ê¸° ì²´í—˜ ì™„ë£Œ", points:10, item:"ì»¤í”¼"},
{title:"ìš”ê°€ ì²´í—˜", desc:"ìš”ê°€ ìˆ˜í–‰ ì™„ë£Œ", points:15, item:"ìš”ê°€ ë§¤íŠ¸"},
{title:"ì‚¬ì§„ ì´¬ì˜", desc:"ìì—° í’ê²½ ì‚¬ì§„ ì´¬ì˜", points:20, item:"ì‚¬ì§„"},
{title:"ê·¸ë¦¼ ê·¸ë¦¬ê¸°", desc:"ìì—° ì† ê·¸ë¦¼ ì™„ì„±", points:25, item:"ê·¸ë¦¼"}
]}
};

function showStories(moduleName){
currentModule=moduleName;
storyList.innerHTML="";
modules[moduleName].stories.forEach((story,i)=>{
const btn=document.createElement("button");
btn.textContent=story.title;
btn.style.display="block";
btn.style.width="100%";
btn.style.marginBottom="5px";
btn.addEventListener("click",()=>{
currentStory=story;
storyTitle.textContent=story.title;
storyDesc.textContent=story.desc;
startVRBtn.style.display="inline-block";
});
storyList.appendChild(btn);
});
}

document.getElementById("loveModule").addEventListener("click",()=>showStories("love"));
document.getElementById("spaceModule").addEventListener("click",()=>showStories("space"));
document.getElementById("hobbyModule").addEventListener("click",()=>showStories("hobby"));

// VR ì²´í—˜ ì‹œì‘
startVRBtn.addEventListener("click",()=>{
moduleScreen.style.display="none";
vrScreen.style.display="flex";
moduleContent.innerHTML="";
vrSky.setAttribute("color", modules[currentModule].sky);
points+=currentStory.points; items.push(currentStory.item); updateScore();

// ì•„ë°”íƒ€ ì˜ˆì‹œ (glTF ëª¨ë¸)
const avatar=document.createElement("a-gltf-model");
avatar.setAttribute("src","https://cdn.jsdelivr.net/gh/KhronosGroup/glTF-Sample-Models/2.0/Avocado/glTF/Avocado.gltf");
avatar.setAttribute("position","0 0 -3");
avatar.setAttribute("scale","0.5 0.5 0.5");
avatar.setAttribute("animation__hover","property=rotation;to=0 360 0;loop=true;dur=4000;easing=linear");
moduleContent.appendChild(avatar);
});

// VR ë’¤ë¡œê°€ê¸°
backVRBtn.addEventListener("click",()=>{
vrScreen.style.display="none";
moduleScreen.style.display="flex";
moduleContent.innerHTML="";
startVRBtn.style.display="none";
});
backBtn.addEventListener("click",()=>{
moduleScreen.style.display="none";
homeScreen.style.display="flex";
storyList.innerHTML="";
storyTitle.textContent="";
storyDesc.textContent="";
startVRBtn.style.display="none";
});
</script>
</body>
</html>
