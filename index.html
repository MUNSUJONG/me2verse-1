<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>Me2Verse VR ë©”íƒ€ë²„ìŠ¤ ì™„ì„±í˜•</title>
<script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
<style>
  body{margin:0; font-family: Arial, sans-serif; background:#f0f0f0;}
  header{position:fixed; top:0; left:0; width:100%; background:#333; color:white; display:flex; justify-content:space-around; padding:10px; z-index:10;}
  header button{padding:5px 10px; background:#555; border:none; border-radius:5px; color:white; cursor:pointer;}
  .screen{width:100%; height:100vh; display:none; justify-content:center; align-items:center; flex-direction:column; padding-top:60px; box-sizing:border-box;}
  #homeScreen{display:flex; background:white;}
  input, select, button{padding:10px 15px; margin:5px; border-radius:5px; border:1px solid #ccc;}
  button{cursor:pointer;}
  .storyBtn{background:#4CAF50; color:white;}
  #questLog{margin-top:10px; background:rgba(255,255,255,0.9); padding:10px; border-radius:5px; width:80%; max-width:400px; max-height:150px; overflow-y:auto; font-size:14px;}
</style>
</head>
<body>

<header>
  <button id="homeBtn">ğŸ  í™ˆ</button>
  <button id="storyBtn">ğŸ“– ìŠ¤í† ë¦¬ ì²´í—˜</button>
  <button id="walletBtn">ğŸ’° íŒŒì´ì½”ì¸</button>
  <button id="proposalBtn">âœï¸ ìŠ¤í† ë¦¬ ì œì•ˆ</button>
</header>

<div id="homeScreen" class="screen">
  <h1>ğŸš€ Me2Verse VR ë©”íƒ€ë²„ìŠ¤</h1>
  <p>ë¡œê·¸ì¸ â†’ íŒŒì´ì½”ì¸ ê²°ì œ â†’ ìŠ¤í† ë¦¬ ì²´í—˜ â†’ ê¸°ë¡ ì €ì¥</p>
  <input type="text" id="username" placeholder="ìœ ì € ì´ë¦„ ì…ë ¥">
  <select id="amount">
    <option value="1000">1 Piì½”ì¸</option>
    <option value="5000">5 Piì½”ì¸</option>
    <option value="10000">10 Piì½”ì¸</option>
  </select><br>
  <button id="loginPayBtn">ìë™ ë¡œê·¸ì¸ + ê²°ì œ</button>
  <div id="homeMsg"></div>
</div>

<div id="storyScreen" class="screen">
  <h2>ìŠ¤í† ë¦¬ ì²´í—˜</h2>
  <div id="storyList"></div>
  <button id="startStoryBtn" style="display:none;">ì²´í—˜ ì‹œì‘</button>
  <div id="questLog"></div>
</div>

<div id="walletScreen" class="screen">
  <h2>ğŸ’° íŒŒì´ì½”ì¸ ì§€ê°‘</h2>
  <p id="walletStatus">ë³´ìœ  Piì½”ì¸: 0</p>
</div>

<div id="proposalScreen" class="screen">
  <h2>ìŠ¤í† ë¦¬ ì œì•ˆ</h2>
  <textarea id="proposalText" rows="5" cols="40" placeholder="ìŠ¤í† ë¦¬ ì•„ì´ë””ì–´ ì‘ì„±"></textarea><br>
  <button id="submitProposal">ì œì•ˆ ì œì¶œ</button>
  <div id="proposalMsg"></div>
</div>

<script>
let username="", piCoin=0, currentStory="", questLogArr=[];
const homeScreen=document.getElementById("homeScreen");
const storyScreen=document.getElementById("storyScreen");
const walletScreen=document.getElementById("walletScreen");
const proposalScreen=document.getElementById("proposalScreen");
const questLogEl=document.getElementById("questLog");
const walletStatus=document.getElementById("walletStatus");
const storyListEl=document.getElementById("storyList");
const startStoryBtn=document.getElementById("startStoryBtn");

// ìŠ¤í† ë¦¬ 10ê°œ ìƒ˜í”Œ
const stories=[
  {title:"ì—°ì•  ëª¨í—˜", desc:"ê³µì›ì—ì„œ ìºë¦­í„°ì™€ ìƒí˜¸ì‘ìš©í•˜ë©° ì‚¬ë‘ì„ ì°¾ì•„ë³´ì„¸ìš”.", points:10, item:"í•˜íŠ¸"},
  {title:"ìš°ì£¼ íƒí—˜", desc:"ìš°ì£¼ì„ ì„ íƒ€ê³  í–‰ì„±ì„ íƒí—˜í•˜ê³  ì§€ë„ì™€ ì•„ì´í…œì„ ìˆ˜ì§‘í•˜ì„¸ìš”.", points:15, item:"í–‰ì„± ì§€ë„"},
  {title:"íŒíƒ€ì§€ ë§ˆë²•", desc:"ë§ˆë²• í•™êµì—ì„œ ë§ˆë²•ì„ ë°°ìš°ê³  í€˜ìŠ¤íŠ¸ë¥¼ ì™„ìˆ˜í•˜ì„¸ìš”.", points:12, item:"ë§ˆë²•ì±…"},
  {title:"ë¯¸ë˜ ë„ì‹œ", desc:"ë„ì‹œë¥¼ íƒí—˜í•˜ê³  NPCì™€ ìƒí˜¸ì‘ìš©í•˜ì—¬ í¬ì¸íŠ¸ë¥¼ íšë“í•˜ì„¸ìš”.", points:10, item:"ê±´ë¬¼ ì„¤ê³„ë„"},
  {title:"ì—¬í–‰ ì²´í—˜", desc:"ê´€ê´‘ì§€ë¥¼ ëŒì•„ë‹¤ë‹ˆë©° ì‚¬ì§„ê³¼ ì•„ì´í…œì„ ìˆ˜ì§‘í•˜ì„¸ìš”.", points:8, item:"ì‚¬ì§„"},
  {title:"ì•„ì´ëŒ ìŠ¤íƒ€", desc:"ë¬´ëŒ€ì—ì„œ ê³µì—°í•˜ë©° íŒ¬ê³¼ êµë¥˜í•˜ì„¸ìš”.", points:15, item:"íŒ¬ ì‚¬ì¸"},
  {title:"ì°½ì—… ê²½í—˜", desc:"ê°€ìƒ ì°½ì—…ì„ í†µí•´ ê²½ì œí™œë™ì„ ê²½í—˜í•˜ì„¸ìš”.", points:12, item:"íˆ¬ì ê³„ì•½ì„œ"},
  {title:"ì—­ì‚¬ ì† ì²´í—˜", desc:"ê³¼ê±°ì˜ ì—­ì‚¬ì  ì¸ë¬¼ê³¼ êµë¥˜í•˜ë©° ì‚¬ê±´ì„ ì²´í—˜í•˜ì„¸ìš”.", points:10, item:"ì—­ì‚¬ ê¸°ë¡"},
  {title:"ìˆ²ì† ì·¨ë¯¸", desc:"ìˆ²ì†ì—ì„œ ì‚°ì±…í•˜ë©° ê½ƒê³¼ ì»¤í”¼ë¥¼ ìˆ˜ì§‘í•˜ì„¸ìš”.", points:5, item:"ê½ƒ"},
  {title:"ë‹¤êµ­ì  êµë¥˜", desc:"ë‹¤ì–‘í•œ ë¬¸í™”ì˜ NPCì™€ ëŒ€í™”í•˜ë©° ì•„ì´í…œì„ ì–»ìœ¼ì„¸ìš”.", points:10, item:"ë¬¸í™” ì¹´ë“œ"}
];

// í™”ë©´ ì „í™˜ í•¨ìˆ˜
function showScreen(screen){ 
  homeScreen.style.display="none";
  storyScreen.style.display="none";
  walletScreen.style.display="none";
  proposalScreen.style.display="none";
  screen.style.display="flex";
}

// í™ˆ ë²„íŠ¼
document.getElementById("homeBtn").addEventListener("click",()=>showScreen(homeScreen));
document.getElementById("storyBtn").addEventListener("click",()=>showScreen(storyScreen));
document.getElementById("walletBtn").addEventListener("click",()=>{walletStatus.textContent="ë³´ìœ  Piì½”ì¸: "+piCoin; showScreen(walletScreen);});
document.getElementById("proposalBtn").addEventListener("click",()=>showScreen(proposalScreen));

// ë¡œê·¸ì¸ + ê²°ì œ
document.getElementById("loginPayBtn").addEventListener("click",()=>{
  const inputName=document.getElementById("username").value.trim();
  const amount=parseInt(document.getElementById("amount").value);
  if(!inputName){ alert("ìœ ì € ì´ë¦„ ì…ë ¥ í•„ìš”!"); return; }
  username=inputName; piCoin+=amount;
  document.getElementById("homeMsg").innerText=`${username}ë‹˜ ë¡œê·¸ì¸ ì„±ê³µ! ${amount} Piì½”ì¸ ì¶©ì „ ì™„ë£Œ!`;
  walletStatus.textContent="ë³´ìœ  Piì½”ì¸: "+piCoin;
});

// ìŠ¤í† ë¦¬ ëª©ë¡ í‘œì‹œ
stories.forEach((s,i)=>{
  const btn=document.createElement("button");
  btn.innerText=`${s.title} (${s.points}P)`;
  btn.className="storyBtn";
  btn.addEventListener("click",()=>{
    currentStory=i; 
    startStoryBtn.style.display="inline-block"; 
    questLogArr=[]; 
    questLogEl.innerHTML="";
  });
  storyListEl.appendChild(btn);
});

// ìŠ¤í† ë¦¬ ì²´í—˜ ì‹œì‘
startStoryBtn.addEventListener("click",()=>{
  const story=stories[currentStory];
  piCoin-=5; // ì²´í—˜ ë¹„ìš© ì˜ˆì‹œ
  walletStatus.textContent="ë³´ìœ  Piì½”ì¸: "+piCoin;
  questLogArr.push(`ìŠ¤í† ë¦¬ ì²´í—˜: ${story.title} ì‹œì‘`);
  questLogArr.push(`íšë“ ì•„ì´í…œ: ${story.item} +${story.points}P`);
  questLogEl.innerHTML=questLogArr.map(m=>`â€¢ ${m}`).join("<br>");
  startStoryBtn.style.display="none";
});

// ìŠ¤í† ë¦¬ ì œì•ˆ
document.getElementById("submitProposal").addEventListener("click",()=>{
  const text=document.getElementById("proposalText").value.trim();
  if(!text){ alert("ì œì•ˆ ë‚´ìš© ì…ë ¥ í•„ìš”!"); return; }
  document.getElementById("proposalMsg").innerText="ì œì•ˆì´ ì œì¶œë˜ì—ˆìŠµë‹ˆë‹¤! ê°ì‚¬í•©ë‹ˆë‹¤.";
  document.getElementById("proposalText").value="";
});

</script>
</body>
</html>
