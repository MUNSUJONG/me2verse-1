<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Me2Verse AI ëŒ€í™”í˜• ì²´í—˜</title>
<style>
body { font-family: Arial; margin:0; padding:0; background:#f0f4f8; display:flex; flex-direction:column; align-items:center; }
h1 { color:#e74c3c; margin:10px 0; text-align:center; }
#levelContainer { width:90%; background:#ddd; border-radius:10px; margin:10px auto; height:25px; overflow:hidden; }
#levelBar { height:25px; width:0%; background:#f39c12; text-align:center; color:#fff; line-height:25px; transition:width 0.5s; font-weight:bold; }
#moduleButtons { display:flex; flex-wrap:wrap; justify-content:center; margin-top:10px; }
.button { margin:6px; padding:12px 20px; font-size:16px; color:#fff; background:#3498db; border:none; border-radius:8px; cursor:pointer; flex:1; min-width:120px; transition:0.2s; }
.button:hover { background:#2980b9; }
.module { display:none; padding:20px; margin:20px auto; border-radius:12px; box-shadow:0 4px 8px rgba(0,0,0,0.2); max-width:600px; width:90%; position:relative; background:#fff; }
.chat-box { border:1px solid #ccc; padding:10px; height:300px; overflow-y:auto; border-radius:10px; background:#fefefe; margin-bottom:10px; }
.message { margin:6px 0; padding:8px 12px; border-radius:12px; max-width:80%; clear:both; }
.message.ai { background:#3498db; color:#fff; float:left; }
.message.user { background:#2ecc71; color:#fff; float:right; }
#userInput { width:calc(100% - 100px); padding:10px; border-radius:8px; border:1px solid #ccc; font-size:16px; }
#sendBtn { padding:10px 16px; border:none; border-radius:8px; background:#e67e22; color:#fff; cursor:pointer; transition:0.2s; }
#sendBtn:hover { background:#d35400; }
.backBtn { background:#16a085; margin-top:10px; }
.backBtn:hover { background:#0e6655; }
</style>
</head>
<body>

<h1>ğŸš€ Me2Verse AI ëŒ€í™”í˜• ì²´í—˜</h1>
<div id="levelContainer">
  <div id="levelBar">ë ˆë²¨ 1 (0 XP)</div>
</div>

<div id="moduleButtons">
  <button class="button" onclick="showModule('love')">â¤ï¸ ì—°ì• </button>
  <button class="button" onclick="showModule('marriage')">ğŸ’ ê²°í˜¼</button>
  <button class="button" onclick="showModule('hobby')">ğŸ¨ ì·¨ë¯¸</button>
  <button class="button" onclick="showModule('space')">ğŸŒŒ ìš°ì£¼</button>
</div>

<!-- ëª¨ë“ˆ êµ¬ì¡° -->
<div id="love" class="module">
  <h2>â¤ï¸ ì—°ì•  ì²´í—˜</h2>
  <div class="chat-box" id="loveChat"></div>
  <input type="text" id="loveInput" placeholder="AIì—ê²Œ ë§í•´ë³´ì„¸ìš”...">
  <button id="loveSend" class="button" onclick="sendMessage('love')">ë³´ë‚´ê¸°</button>
  <button class="button backBtn" onclick="backToMain()">ë©”ì¸ìœ¼ë¡œ</button>
</div>

<div id="marriage" class="module">
  <h2>ğŸ’ ê²°í˜¼ ì²´í—˜</h2>
  <div class="chat-box" id="marriageChat"></div>
  <input type="text" id="marriageInput" placeholder="AIì—ê²Œ ë§í•´ë³´ì„¸ìš”...">
  <button id="marriageSend" class="button" onclick="sendMessage('marriage')">ë³´ë‚´ê¸°</button>
  <button class="button backBtn" onclick="backToMain()">ë©”ì¸ìœ¼ë¡œ</button>
</div>

<div id="hobby" class="module">
  <h2>ğŸ¨ ì·¨ë¯¸ ì²´í—˜</h2>
  <div class="chat-box" id="hobbyChat"></div>
  <input type="text" id="hobbyInput" placeholder="AIì—ê²Œ ë§í•´ë³´ì„¸ìš”...">
  <button id="hobbySend" class="button" onclick="sendMessage('hobby')">ë³´ë‚´ê¸°</button>
  <button class="button backBtn" onclick="backToMain()">ë©”ì¸ìœ¼ë¡œ</button>
</div>

<div id="space" class="module">
  <h2>ğŸŒŒ ìš°ì£¼ ì²´í—˜</h2>
  <div class="chat-box" id="spaceChat"></div>
  <input type="text" id="spaceInput" placeholder="AIì—ê²Œ ë§í•´ë³´ì„¸ìš”...">
  <button id="spaceSend" class="button" onclick="sendMessage('space')">ë³´ë‚´ê¸°</button>
  <button class="button backBtn" onclick="backToMain()">ë©”ì¸ìœ¼ë¡œ</button>
</div>

<script>
// ë ˆë²¨/XP
let level = 1;
let xp = 0;
const xpPerLevel = 20;

function updateLevelBar(){
  let percent = (xp % xpPerLevel)/xpPerLevel*100;
  document.getElementById('levelBar').style.width = percent + '%';
  document.getElementById('levelBar').textContent = `ë ˆë²¨ ${level} (${xp} XP)`;
}

function addXP(amount){
  xp += amount;
  if(xp >= level*xpPerLevel){
    level++;
    alert(`ğŸ‰ ë ˆë²¨ì—…! ë ˆë²¨ ${level} ë‹¬ì„±!`);
  }
  updateLevelBar();
}

// ëª¨ë“ˆ ê´€ë¦¬
let currentModule = '';
function showModule(id){
  currentModule = id;
  const modules = document.querySelectorAll('.module');
  modules.forEach(m=>m.style.display='none');
  document.getElementById(id).style.display='block';
  startConversation(id);
}

function backToMain(){
  const modules = document.querySelectorAll('.module');
  modules.forEach(m=>m.style.display='none');
  currentModule = '';
}

// AI ëŒ€í™” ì´ˆê¸°í™”
const aiModules = {
  love:{chatId:'loveChat', inputId:'loveInput', messages:[], aiName:'ì—°ì¸ AI'},
  marriage:{chatId:'marriageChat', inputId:'marriageInput', messages:[], aiName:'ì›¨ë”© í”Œë˜ë„ˆ AI'},
  hobby:{chatId:'hobbyChat', inputId:'hobbyInput', messages:[], aiName:'ì·¨ë¯¸ ë©˜í†  AI'},
  space:{chatId:'spaceChat', inputId:'spaceInput', messages:[], aiName:'ìš°ì£¼ì„  AI'}
};

// ëŒ€í™” ì‹œì‘
function startConversation(module){
  const ai = aiModules[module];
  ai.messages = [];
  addAIMessage(module, `ì•ˆë…•í•˜ì„¸ìš”! ${ai.aiName}ì…ë‹ˆë‹¤. ëŒ€í™”ë¥¼ ì‹œì‘í•´ë³¼ê¹Œìš”?`);
}

// ë©”ì‹œì§€ í‘œì‹œ
function addMessage(module, text, sender){
  const ai = aiModules[module];
  const chatBox = document.getElementById(ai.chatId);
  const msgDiv = document.createElement('div');
  msgDiv.className = 'message '+sender;
  msgDiv.textContent = text;
  chatBox.appendChild(msgDiv);
  chatBox.scrollTop = chatBox.scrollHeight;
}

// AI ë©”ì‹œì§€
function addAIMessage(module, text){
  addMessage(module,text,'ai');
  aiModules[module].messages.push({sender:'ai', text});
  addXP(2); // AI ë©”ì‹œì§€ë§ˆë‹¤ XP
}

// ì‚¬ìš©ì ë©”ì‹œì§€
function sendMessage(module){
  const ai = aiModules[module];
  const input = document.getElementById(ai.inputId);
  if(!input.value) return;
  addMessage(module,input.value,'user');
  ai.messages.push({sender:'user', text:input.value});
  // AI ë°˜ì‘ ìƒì„±
  setTimeout(()=>generateAIResponse(module,input.value),500);
  input.value='';
}

// ê°„ë‹¨ AI ì‘ë‹µ (ëœë¤ ë˜ëŠ” ì„ íƒ ê¸°ë°˜)
function generateAIResponse(module, userText){
  const ai = aiModules[module];
  const responses = [
    "ì •ë§ í¥ë¯¸ë¡œìš´ ì„ íƒì´ë„¤ìš”!",
    "ê·¸ëŸ° ë°©ë²•ë„ ìˆêµ°ìš”!",
    "ì¢‹ì•„ìš”, ê³„ì† ì§„í–‰í•´ë´ìš”!",
    "ìŒâ€¦ ë‹¤ë¥¸ ë°©ë²•ë„ ì‹œë„í•´ë³¼ê¹Œìš”?"
  ];
  const response = responses[Math.floor(Math.random()*responses.length)];
  addAIMessage(module,response);
}
</script>
</body>
</html>
