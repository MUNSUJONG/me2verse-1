<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>Me2Verse ì²´í—˜í˜• ë©”íƒ€ë²„ìŠ¤</title>
<script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
<style>
  body { margin:0; padding:0; font-family: Arial, sans-serif; background:#f0f0f0; }
  #status{position:fixed;top:10px;left:50%;transform:translateX(-50%);
          background:rgba(255,255,255,0.85);padding:5px 10px;border-radius:5px;font-size:16px; z-index:5;}
  #score{position:fixed;bottom:10px;left:50%;transform:translateX(-50%);
         background:rgba(0,0,0,0.6);color:white;padding:5px 10px;border-radius:5px;font-size:16px; z-index:5;}
  .screen{width:100%;height:100vh;display:flex;justify-content:center;
          align-items:center;flex-direction:column;transition:all 0.5s;position:absolute;top:0;left:0;}
  #homeScreen{background:white; z-index:3;}
  #moduleScreen{background:#fafafa;display:none; z-index:2;}
  #vrScreen{background:black;display:none; z-index:1;}
  input,select,button{padding:10px 15px;margin:5px;font-size:16px;border-radius:5px;border:1px solid #ccc;}
  button{cursor:pointer;border:none;color:white;}
  #loginBtn{background-color:#2196F3;}
  .moduleBtn{background-color:#4CAF50;}
  #startVRBtn{background-color:#9C27B0;display:none;margin-top:10px;}
  #backBtn{background-color:#FF5722;display:none;margin-top:15px;}
  #storyLog{margin-top:15px;background:rgba(255,255,255,0.85);padding:10px;border-radius:5px;width:80%;max-width:500px;font-size:14px;max-height:200px;overflow-y:auto;}
  a-scene{width:100%;height:100vh;}
</style>
</head>
<body>

<div id="status">ìƒíƒœ: ëŒ€ê¸° ì¤‘</div>
<div id="score">í¬ì¸íŠ¸: 0 | ì•„ì´í…œ: ì—†ìŒ</div>

<!-- í™ˆ í™”ë©´ -->
<div id="homeScreen" class="screen">
  <h1>ğŸš€ Me2Verse ì²´í—˜í˜• ë©”íƒ€ë²„ìŠ¤</h1>
  <p>Pi ê³„ì • ë¡œê·¸ì¸ í›„ ëª¨ë“ˆ ì²´í—˜ ì‹œì‘</p>
  <input type="text" id="username" placeholder="Pi ê³„ì • ì…ë ¥">
  <button id="loginBtn">ë¡œê·¸ì¸</button>
</div>

<!-- ëª¨ë“ˆ í™”ë©´ -->
<div id="moduleScreen" class="screen">
  <h2>ëª¨ë“ˆ ì„ íƒ</h2>
  <div>
    <button class="moduleBtn" id="loveModule">ì—°ì•  ëª¨ë“ˆ</button>
    <button class="moduleBtn" id="spaceModule">ìš°ì£¼ì²´í—˜ ëª¨ë“ˆ</button>
    <button class="moduleBtn" id="hobbyModule">ì·¨ë¯¸ ëª¨ë“ˆ</button>
  </div>
  <div id="moduleDetail" style="margin-top:20px;">
    <h3 id="moduleTitle"></h3>
    <p id="moduleDesc"></p>
    <button id="startVRBtn">VR ì²´í—˜ ì‹œì‘</button>
    <button id="backBtn">ğŸ  ë’¤ë¡œê°€ê¸°</button>
    <div id="storyLog"></div>
  </div>
</div>

<!-- VR í™”ë©´ -->
<div id="vrScreen" class="screen">
  <a-scene id="vrScene">
    <a-sky id="vrSky" color="#ECECEC"></a-sky>
    <a-entity id="moduleContent"></a-entity>
    <a-entity id="cameraRig" position="0 1.6 0">
      <a-camera wasd-controls look-controls>
        <a-cursor color="black"></a-cursor>
      </a-camera>
    </a-entity>
    <a-entity light="type: ambient; intensity:0.6"></a-entity>
    <a-entity light="type: directional; intensity:0.8" position="1 2 1"></a-entity>
  </a-scene>
  <button id="backVRBtn" style="position:absolute;top:10px;right:10px;padding:10px 15px;background:#FF5722;color:white;border:none;border-radius:5px;">ë’¤ë¡œê°€ê¸°</button>
</div>

<script>
const statusEl=document.getElementById("status");
const scoreEl=document.getElementById("score");
const homeScreen=document.getElementById("homeScreen");
const moduleScreen=document.getElementById("moduleScreen");
const vrScreen=document.getElementById("vrScreen");
const moduleContent=document.getElementById("moduleContent");
const vrSky=document.getElementById("vrSky");
const moduleTitle=document.getElementById("moduleTitle");
const moduleDesc=document.getElementById("moduleDesc");
const startVRBtn=document.getElementById("startVRBtn");
const backBtn=document.getElementById("backBtn");
const backVRBtn=document.getElementById("backVRBtn");
const storyLog=document.getElementById("storyLog");

let points=0, items=[], currentModule="", logMessages=[];

function updateScore(){ scoreEl.textContent=`í¬ì¸íŠ¸: ${points} | ì•„ì´í…œ: ${items.length?items.join(", "):"ì—†ìŒ"}`; }
function logStory(msg){ logMessages.push(msg); storyLog.innerHTML=logMessages.map(m=>`â€¢ ${m}`).join("<br>"); }

// ë¡œê·¸ì¸
document.getElementById("loginBtn").addEventListener("click",()=>{
  const username=document.getElementById("username").value.trim();
  if(!username){ alert("Pi ê³„ì • ì…ë ¥ í•„ìš”!"); return; }
  statusEl.textContent=`ìƒíƒœ: ${username} ë¡œê·¸ì¸ ì„±ê³µ! ğŸ‰`;
  homeScreen.style.display="none";
  moduleScreen.style.display="flex";
});

// ëª¨ë“ˆ ì •ì˜ + ìŠ¤í† ë¦¬
const modules={
love:{
title:"ì—°ì•  ëª¨ë“ˆ",
desc:"ê³µì›ê³¼ ì¹´í˜ì—ì„œ ìºë¦­í„°ì™€ ìƒí˜¸ì‘ìš©í•˜ë©° ì—°ì•  ì²´í—˜",
sky:"#FFC0CB",
stories:[
"ê³µì›ì—ì„œ ì²« ë§Œë‚¨, ìºë¦­í„°ì™€ ëˆˆ ë§ì¶¤",
"ì»¤í”¼ìˆì—ì„œ ìºë¦­í„°ì™€ ëŒ€í™”, í•˜íŠ¸ íšë“",
"ìºë¦­í„°ì™€ ì‚¬ì§„ ì°ê¸°, í¬ì¸íŠ¸ íšë“",
"ì €ë… ì‚°ì±…ì—ì„œ ì‘ì€ ì´ë²¤íŠ¸ ë°œìƒ",
"ì¶•ì œ ì´ë²¤íŠ¸ì—ì„œ ìºë¦­í„° ì„ íƒì§€ ì§„í–‰",
"í¸ì§€ ì „ë‹¬ ì´ë²¤íŠ¸",
"ê³µë™ ë¯¸ì…˜ ìˆ˜í–‰",
"ê²Œì„ ì† ë¯¸ë‹ˆí€˜ìŠ¤íŠ¸ ì§„í–‰",
"ìºë¦­í„° ì¹œë°€ë„ ìƒìŠ¹",
"ì—°ì•  ëª¨ë“œ í´ë¼ì´ë§¥ìŠ¤ ì´ë²¤íŠ¸"
],
avatars:[
{type:"a-box", color:"#FF69B4", pos:"-1 1 -3", log:"ğŸ’Œ ìºë¦­í„°ì™€ ëŒ€í™” ì™„ë£Œ! +10ì , í•˜íŠ¸ íšë“", points:10, item:"í•˜íŠ¸"},
{type:"a-box", color:"#FF1493", pos:"1 1 -3", log:"ğŸ’Œ ìºë¦­í„°2ì™€ ëŒ€í™” ì™„ë£Œ! +10ì , í•˜íŠ¸ íšë“", points:10, item:"í•˜íŠ¸"}
]
},
space:{
title:"ìš°ì£¼ì²´í—˜ ëª¨ë“ˆ",
desc:"íƒì‚¬ì„  íƒ‘ìŠ¹ í›„ í–‰ì„±ì„ íƒí—˜í•˜ë©° ì•„ì´í…œê³¼ í¬ì¸íŠ¸ íšë“",
sky:"#000022",
stories:[
"íƒì‚¬ì„  íƒ‘ìŠ¹",
"ì²« ë²ˆì§¸ í–‰ì„± ì°©ë¥™",
"í–‰ì„± í‘œë³¸ ìˆ˜ì§‘",
"ìš°ì£¼ ë¯¸ì…˜ ìˆ˜í–‰",
"ë‘ ë²ˆì§¸ í–‰ì„± ì°©ë¥™",
"í–‰ì„± ì§€ë„ íšë“",
"ì—°ë£Œ ë³´ê¸‰ ì´ë²¤íŠ¸",
"íƒì‚¬ì„  ìˆ˜ë¦¬ í€˜ìŠ¤íŠ¸",
"ì™¸ê³„ ìƒë¬¼ ê´€ì°°",
"ëª¨ë“ˆ ì²´í—˜ ì¢…ë£Œ"
],
avatars:[
{type:"a-sphere", color:"#FFA500", pos:"-1 1.5 -4", log:"ğŸª í–‰ì„± íƒí—˜ ì™„ë£Œ! +15ì , ì§€ë„ íšë“", points:15, item:"í–‰ì„± ì§€ë„"},
{type:"a-sphere", color:"#00FFFF", pos:"1 2 -5", log:"ğŸª í–‰ì„±2 íƒí—˜ ì™„ë£Œ! +15ì , ì§€ë„ íšë“", points:15, item:"í–‰ì„± ì§€ë„"}
]
},
hobby:{
title:"ì·¨ë¯¸ ëª¨ë“ˆ",
desc:"ìˆ²ì† ì‚°ì±…ê³¼ ì·¨ë¯¸ í™œë™ VR ì²´í—˜, ê½ƒê³¼ ì»¤í”¼ ìˆ˜ì§‘",
sky:"#A0E0A0",
stories:[
"ìˆ²ì† ì‚°ì±… ì‹œì‘",
"ë‚˜ë¬´ ê´€ì°° ì´ë²¤íŠ¸",
"ê½ƒ ìˆ˜ì§‘ ì´ë²¤íŠ¸",
"ë²šê½ƒê¸¸ ê±·ê¸°",
"ë²¤ì¹˜ì—ì„œ ì‰¬ê¸°",
"ì»¤í”¼ ë§Œë“¤ê¸° ë¯¸ì…˜",
"ì‘ì€ ë™ë¬¼ ê´€ì°°",
"ì‚¬ì§„ ì´¬ì˜ ì´ë²¤íŠ¸",
"ì•„ì´í…œ ìˆ˜ì§‘ ì™„ë£Œ",
"ì·¨ë¯¸ ëª¨ë“ˆ ì²´í—˜ ì¢…ë£Œ"
],
avatars:[
{type:"a-cone", color:"#228B22", pos:"-1 0.5 -3", log:"ğŸŒ³ ë‚˜ë¬´ ê´€ì°° ì™„ë£Œ! +5ì , ê½ƒ íšë“", points:5, item:"ê½ƒ"},
{type:"a-box", color:"#8B4513", pos:"1 0.3 -3", log:"ğŸª‘ ë²¤ì¹˜ì— ì•‰ì•„ ì‰¬ê¸°! +5ì , ì»¤í”¼ íšë“", points:5, item:"ì»¤í”¼"}
]
}
};

// ëª¨ë“ˆ ì„ íƒ
function selectModule(name){
currentModule=name;
const mod=modules[name];
moduleTitle.textContent=mod.title;
moduleDesc.textContent=mod.desc;
startVRBtn.style.display="inline-block";
backBtn.style.display="inline-block";
logMessages=[];
mod.stories.forEach(s=>logStory(s));
}

document.getElementById("loveModule").addEventListener("click",()=>selectModule("love"));
document.getElementById("spaceModule").addEventListener("click",()=>selectModule("space"));
document.getElementById("hobbyModule").addEventListener("click",()=>selectModule("hobby"));

// VR ì‹œì‘
startVRBtn.addEventListener("click",()=>{
moduleScreen.style.display="none";
vrScreen.style.display="flex";
moduleContent.innerHTML="";
points=0; items=[]; updateScore();
const mod=modules[currentModule];
vrSky.setAttribute("color",mod.sky);
mod.avatars.forEach(obj=>{
const el=document.createElement(obj.type);
el.setAttribute("position",obj.pos);
el.setAttribute("color",obj.color);
el.setAttribute("scale","0.5 0.5 0.5");
el.addEventListener("click",()=>{
points+=obj.points; items.push(obj.item); updateScore(); logStory(obj.log);
});
moduleContent.appendChild(el);
});
});

// VR ë’¤ë¡œê°€ê¸°
backVRBtn.addEventListener("click",()=>{
vrScreen.style.display="none";
moduleScreen.style.display="flex";
moduleContent.innerHTML="";
logMessages=[];
storyLog.innerHTML="";
startVRBtn.style.display="inline-block";
backBtn.style.display="inline-block";
statusEl.textContent="ìƒíƒœ: ë¡œê·¸ì¸ ì™„ë£Œ";
});

// ëª¨ë“ˆ ë’¤ë¡œê°€ê¸°
backBtn.addEventListener("click",()=>{
moduleScreen.style.display="none";
homeScreen.style.display="flex";
startVRBtn.style.display="none";
backBtn.style.display="none";
logMessages=[];
storyLog.innerHTML="";
statusEl.textContent="ìƒíƒœ: ëŒ€ê¸° ì¤‘";
});
</script>
</body>
</html>
