<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>Me2Verse VR ì‹œë®¬ë ˆì´ì…˜</title>
<script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
<style>
  body { margin:0; font-family: Arial, sans-serif; background:#f0f0f0; }
  #status, #score { position:fixed; left:50%; transform:translateX(-50%); padding:5px 10px; border-radius:5px; z-index:3; font-size:16px; }
  #status { top:10px; background:rgba(255,255,255,0.8); color:#3F51B5; }
  #score { bottom:10px; background:rgba(0,0,0,0.6); color:white; }
  .screen { width:100%; height:100vh; display:flex; flex-direction:column; justify-content:center; align-items:center; position:absolute; top:0; left:0; transition:0.5s; }
  #homeScreen { background:white; z-index:3; }
  #moduleScreen, #vrScreen { display:none; z-index:2; }
  input, select, button { margin:5px; padding:10px 15px; font-size:16px; border-radius:5px; border:1px solid #ccc; }
  button { cursor:pointer; color:white; border:none; }
  #autoBtn { background:#2196F3; }
  .moduleBtn { background:#4CAF50; }
  #startVRBtn { background:#9C27B0; display:none; margin-top:10px; }
  #backBtn { background:#FF5722; display:none; margin-top:10px; }
  #questLog { margin-top:15px; background:rgba(255,255,255,0.8); padding:10px; border-radius:5px; width:80%; max-width:400px; font-size:14px; max-height:150px; overflow-y:auto; }
  a-scene { width:100%; height:100vh; }
  #flag { width:80px; margin-bottom:10px; }
</style>
</head>
<body>
<div id="status">ìƒíƒœ: ëŒ€ê¸° ì¤‘</div>
<div id="score">í¬ì¸íŠ¸: 0 | ì•„ì´í…œ: ì—†ìŒ</div>

<!-- í™ˆ í™”ë©´ -->
<div id="homeScreen" class="screen">
  <img id="flag" src="https://upload.wikimedia.org/wikipedia/commons/0/09/Flag_of_South_Korea.svg" alt="íƒœê·¹ê¸°">
  <h1>ğŸš€ Me2Verse VR ì‹œë®¬ë ˆì´ì…˜</h1>
  <p>ë¡œê·¸ì¸ â†’ Piì½”ì¸ ê²°ì œ â†’ ëª¨ë“ˆ ì„ íƒ â†’ VR ì²´í—˜</p>
  <input type="text" id="username" placeholder="ìœ ì € ì´ë¦„ ì…ë ¥">
  <select id="amount">
    <option value="1">â‚±1</option>
    <option value="5">â‚±5</option>
    <option value="10">â‚±10</option>
  </select><br/>
  <button id="autoBtn">ìë™ ë¡œê·¸ì¸ + ê²°ì œ</button>
</div>

<!-- ëª¨ë“ˆ ì„ íƒ í™”ë©´ -->
<div id="moduleScreen" class="screen">
  <h2>ëª¨ë“ˆ ì„ íƒ</h2>
  <div>
    <button class="moduleBtn" id="loveModule">ì—°ì•  ëª¨ë“ˆ</button>
    <button class="moduleBtn" id="spaceModule">ìš°ì£¼ì²´í—˜ ëª¨ë“ˆ</button>
    <button class="moduleBtn" id="hobbyModule">ì·¨ë¯¸ ëª¨ë“ˆ</button>
  </div>
  <div id="moduleDetail" style="margin-top:20px;">
    <h3 id="moduleTitle"></h3>
    <p id="moduleDesc"></p>
    <button id="startVRBtn">VR ì²´í—˜ ì‹œì‘</button>
    <button id="backBtn">ğŸ  ë’¤ë¡œê°€ê¸°</button>
    <div id="questLog"></div>
  </div>
</div>

<!-- VR í™”ë©´ -->
<div id="vrScreen" class="screen">
  <a-scene id="vrScene">
    <a-sky id="vrSky" color="#ECECEC"></a-sky>
    <a-entity id="moduleContent"></a-entity>
    <a-entity id="cameraRig" position="0 1.6 0">
      <a-camera wasd-controls look-controls>
        <a-cursor color="black"></a-cursor>
      </a-camera>
    </a-entity>
    <a-entity light="type: ambient; intensity:0.6"></a-entity>
    <a-entity light="type: directional; intensity:0.8" position="1 2 1"></a-entity>
  </a-scene>
</div>

<script>
const statusEl = document.getElementById("status");
const scoreEl = document.getElementById("score");
const homeScreen = document.getElementById("homeScreen");
const moduleScreen = document.getElementById("moduleScreen");
const vrScreen = document.getElementById("vrScreen");
const moduleContent = document.getElementById("moduleContent");
const vrSky = document.getElementById("vrSky");
const moduleTitle = document.getElementById("moduleTitle");
const moduleDesc = document.getElementById("moduleDesc");
const startVRBtn = document.getElementById("startVRBtn");
const backBtn = document.getElementById("backBtn");
const questLog = document.getElementById("questLog");

let points=0, items=[], currentModule="", logMessages=[];

function updateScore(){ scoreEl.textContent=`í¬ì¸íŠ¸: ${points} | ì•„ì´í…œ: ${items.length?items.join(", "):"ì—†ìŒ"}`; }
function logQuest(msg){ logMessages.push(msg); questLog.innerHTML=logMessages.map(m=>`â€¢ ${m}`).join("<br>"); }

// ë¡œê·¸ì¸ + ê²°ì œ (Piì½”ì¸ ì‹œë®¬ë ˆì´ì…˜)
document.getElementById("autoBtn").addEventListener("click",()=>{
  const username = document.getElementById("username").value.trim();
  const amount = document.getElementById("amount").value;
  if(!username){ alert("ìœ ì € ì´ë¦„ ì…ë ¥ í•„ìš”!"); return; }
  statusEl.textContent=`ìƒíƒœ: ${username} ë¡œê·¸ì¸ ì¤‘...`;
  setTimeout(()=>{
    statusEl.textContent=`ìƒíƒœ: ${username} ë¡œê·¸ì¸ ì„±ê³µ! ğŸ‰`;
    statusEl.textContent=`ìƒíƒœ: Piì½”ì¸ ${amount} ê²°ì œ ì²˜ë¦¬ ì¤‘...`;
    setTimeout(()=>{
      statusEl.textContent=`ìƒíƒœ: ${username} ê²°ì œ ì™„ë£Œ! âœ…`;
      alert(`${username}ë‹˜, Piì½”ì¸ ${amount} ê²°ì œê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!`);
      homeScreen.style.display="none";
      moduleScreen.style.display="flex";
    },1500);
  },1000);
});

// ëª¨ë“ˆ ì •ì˜
const modules={
love:{title:"ì—°ì•  ëª¨ë“ˆ", desc:"ê³µì›ì—ì„œ ì•„ë°”íƒ€ì™€ ìƒí˜¸ì‘ìš©í•˜ë©° ì—°ì•  ì²´í—˜", sky:"#FFC0CB",
avatars:[
{type:"box", pos:"-1 1 -3", color:"#FF69B4", log:"ğŸ’Œ ìºë¦­í„°1 ëŒ€í™” ì™„ë£Œ! +10ì , í•˜íŠ¸ íšë“", points:10, item:"í•˜íŠ¸"},
{type:"box", pos:"1 1 -3", color:"#FF1493", log:"ğŸ’Œ ìºë¦­í„°2 ëŒ€í™” ì™„ë£Œ! +10ì , í•˜íŠ¸ íšë“", points:10, item:"í•˜íŠ¸"}
]},
space:{title:"ìš°ì£¼ì²´í—˜ ëª¨ë“ˆ", desc:"ìš°ì£¼ íƒì‚¬ì„ ê³¼ í–‰ì„±ì„ íƒí—˜í•˜ë©° ì•„ì´í…œ ìˆ˜ì§‘", sky:"#000022",
avatars:[
{type:"sphere", pos:"-1 1.5 -4", color:"#FFA500", log:"ğŸª í–‰ì„±1 íƒí—˜ ì™„ë£Œ! +15ì , ì§€ë„ íšë“", points:15, item:"ì§€ë„"},
{type:"sphere", pos:"1 2 -5", color:"#00FFFF", log:"ğŸª í–‰ì„±2 íƒí—˜ ì™„ë£Œ! +15ì , ì§€ë„ íšë“", points:15, item:"ì§€ë„"}
]},
hobby:{title:"ì·¨ë¯¸ ëª¨ë“ˆ", desc:"ìˆ²ì† ì‚°ì±…ê³¼ ì·¨ë¯¸ ì²´í—˜", sky:"#A0E0A0",
avatars:[
{type:"cone", pos:"-1 0.5 -3", color:"#228B22", log:"ğŸŒ³ ë‚˜ë¬´ ê´€ì°° ì™„ë£Œ! +5ì , ë‚˜ë¬´ íšë“", points:5, item:"ë‚˜ë¬´"},
{type:"box", pos:"1 0.3 -3", color:"#8B4513", log:"ğŸª‘ ë²¤ì¹˜ì—ì„œ íœ´ì‹ ì™„ë£Œ! +5ì , ì»¤í”¼ íšë“", points:5, item:"ì»¤í”¼"}
]}
};

function selectModule(name){
  currentModule=name;
  moduleTitle.textContent=modules[name].title;
  moduleDesc.textContent=modules[name].desc;
  startVRBtn.style.display="inline-block";
  backBtn.style.display="inline-block";
  logMessages=[];
  questLog.innerHTML="";
}

document.getElementById("loveModule").addEventListener("click",()=>selectModule("love"));
document.getElementById("spaceModule").addEventListener("click",()=>selectModule("space"));
document.getElementById("hobbyModule").addEventListener("click",()=>selectModule("hobby"));

// VR ì²´í—˜ ì‹œì‘
startVRBtn.addEventListener("click",()=>{
  moduleScreen.style.display="none";
  vrScreen.style.display="flex";
  moduleContent.innerHTML="";
  points=0; items=[]; updateScore();
  logMessages=[]; questLog.innerHTML="";

  const mod = modules[currentModule];
  vrSky.setAttribute("color",mod.sky);

  mod.avatars.forEach(obj=>{
    const el=document.createElement(`a-${obj.type}`);
    el.setAttribute("position",obj.pos);
    el.setAttribute("color",obj.color);
    if(obj.type==="box"){ el.setAttribute("depth","1"); el.setAttribute("height","2"); el.setAttribute("width","1"); }
    if(obj.type==="cone"){ el.setAttribute("height","2"); el.setAttribute("radius-bottom","0.5"); }
    if(obj.type==="sphere"){ el.setAttribute("radius","1"); }
    el.addEventListener("click",()=>{
      points+=obj.points; items.push(obj.item); updateScore(); logQuest(obj.log);
    });
    moduleContent.appendChild(el);
  });
});

// ë’¤ë¡œê°€ê¸°
backBtn.addEventListener("click",()=>{
  if(vrScreen.style.display==="flex"){
    vrScreen.style.display="none";
    moduleScreen.style.display="flex";
  } else {
    moduleScreen.style.display="none";
    homeScreen.style.display="flex";
  }
  backBtn.style.display="none";
  startVRBtn.style.display="none";
  moduleContent.innerHTML="";
  logMessages=[];
  questLog.innerHTML="";
  statusEl.textContent="ìƒíƒœ: ëŒ€ê¸° ì¤‘";
});
</script>
</body>
</html>
