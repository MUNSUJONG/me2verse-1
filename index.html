<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>Me2Verse VR ë©”íƒ€ë²„ìŠ¤ ì™„ì„±í˜•</title>
<script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
<style>
body { margin:0; padding:0; font-family: Arial, sans-serif; background:#f0f0f0; }
.screen{width:100%;height:100vh;display:flex;justify-content:center;align-items:center;flex-direction:column;transition:all 0.5s;position:absolute;top:0;left:0;}
#homeScreen{background:white; z-index:3;}
#moduleScreen{background:#fafafa;display:none; z-index:2;}
#vrScreen{background:black;display:none; z-index:1;}
input,select,button{padding:10px 15px;margin:5px;font-size:16px;border-radius:5px;border:1px solid #ccc;}
button{cursor:pointer;border:none;color:white;}
#autoBtn{background-color:#2196F3;}
.moduleBtn{background-color:#4CAF50;}
#startVRBtn{background-color:#9C27B0;display:none;margin-top:10px;}
#backBtn{background-color:#FF5722;display:none;margin-top:15px;}
#questLog{margin-top:15px;background:rgba(255,255,255,0.8);padding:10px;border-radius:5px;width:80%;max-width:400px;font-size:14px;max-height:150px;overflow-y:auto;}
a-scene{width:100%;height:100vh;}
#status{position:fixed;top:10px;left:50%;transform:translateX(-50%);
      background:rgba(255,255,255,0.85);padding:5px 10px;border-radius:5px;font-size:16px; z-index:5;}
#score{position:fixed;bottom:10px;left:50%;transform:translateX(-50%);
      background:rgba(0,0,0,0.6);color:white;padding:5px 10px;border-radius:5px;font-size:16px; z-index:5;}
</style>
</head>
<body>

<div id="status">ìƒíƒœ: ëŒ€ê¸° ì¤‘</div>
<div id="score">í¬ì¸íŠ¸: 0 | ì•„ì´í…œ: ì—†ìŒ</div>

<!-- í™ˆ í™”ë©´ -->
<div id="homeScreen" class="screen">
  <h1>ğŸš€ Me2Verse VR ë©”íƒ€ë²„ìŠ¤</h1>
  <p>Pi ê³„ì • ë¡œê·¸ì¸ â†’ ëª¨ë“ˆ ì„ íƒ â†’ ìŠ¤í† ë¦¬ ì²´í—˜ â†’ VR ì²´í—˜</p>
  <input type="text" id="username" placeholder="Pi ê³„ì • ì…ë ¥">
  <button id="autoBtn">ë¡œê·¸ì¸</button>
</div>

<!-- ëª¨ë“ˆ ì„ íƒ í™”ë©´ -->
<div id="moduleScreen" class="screen">
  <h2>ëª¨ë“ˆ ì„ íƒ</h2>
  <div>
    <button class="moduleBtn" id="loveModule">ì—°ì•  ëª¨ë“ˆ</button>
    <button class="moduleBtn" id="spaceModule">ìš°ì£¼ì²´í—˜ ëª¨ë“ˆ</button>
    <button class="moduleBtn" id="hobbyModule">ì·¨ë¯¸ ëª¨ë“ˆ</button>
  </div>
  <div id="moduleDetail" style="margin-top:20px;">
    <h3 id="moduleTitle"></h3>
    <p id="moduleDesc"></p>
    <div id="storyList"></div>
    <button id="startVRBtn">VR ì²´í—˜ ì‹œì‘</button>
    <button id="backBtn">ğŸ  ë’¤ë¡œê°€ê¸°</button>
    <div id="questLog"></div>
  </div>
</div>

<!-- VR í™”ë©´ -->
<div id="vrScreen" class="screen">
  <a-scene id="vrScene">
    <a-sky id="vrSky" color="#ECECEC"></a-sky>
    <a-entity id="moduleContent"></a-entity>
    <a-entity id="cameraRig" position="0 1.6 0">
      <a-camera wasd-controls look-controls>
        <a-cursor color="black"></a-cursor>
      </a-camera>
    </a-entity>
    <a-entity light="type: ambient; intensity:0.6"></a-entity>
    <a-entity light="type: directional; intensity:0.8" position="1 2 1"></a-entity>
  </a-scene>
  <button id="backVRBtn" style="position:absolute;top:20px;left:20px;z-index:10;padding:10px;background:#FF5722;color:white;border:none;border-radius:5px;">ğŸ  ë’¤ë¡œê°€ê¸°</button>
</div>

<script>
const statusEl=document.getElementById("status");
const scoreEl=document.getElementById("score");
const homeScreen=document.getElementById("homeScreen");
const moduleScreen=document.getElementById("moduleScreen");
const vrScreen=document.getElementById("vrScreen");
const moduleTitle=document.getElementById("moduleTitle");
const moduleDesc=document.getElementById("moduleDesc");
const storyList=document.getElementById("storyList");
const startVRBtn=document.getElementById("startVRBtn");
const backBtn=document.getElementById("backBtn");
const questLog=document.getElementById("questLog");
const moduleContent=document.getElementById("moduleContent");
const vrSky=document.getElementById("vrSky");
const backVRBtn=document.getElementById("backVRBtn");

let points=0, items=[], currentModule="", logMessages=[], completedStories=[];

function updateScore(){ scoreEl.textContent=`í¬ì¸íŠ¸: ${points} | ì•„ì´í…œ: ${items.length?items.join(", "):"ì—†ìŒ"}`; }
function logQuest(msg){ logMessages.push(msg); questLog.innerHTML=logMessages.map(m=>`â€¢ ${m}`).join("<br>"); }

// ë¡œê·¸ì¸
document.getElementById("autoBtn").addEventListener("click",()=>{
  const username=document.getElementById("username").value.trim();
  if(!username){ alert("Pi ê³„ì • ì…ë ¥ í•„ìš”!"); return; }
  statusEl.textContent=`ìƒíƒœ: ${username} ë¡œê·¸ì¸ ì¤‘...`;
  setTimeout(()=>{
    statusEl.textContent=`ìƒíƒœ: ${username} ë¡œê·¸ì¸ ì„±ê³µ! ğŸ‰`;
    homeScreen.style.display="none";
    moduleScreen.style.display="flex";
  },1000);
});

// ëª¨ë“ˆ ì •ì˜ ë° ìŠ¤í† ë¦¬
const modules={
love:{title:"ì—°ì•  ëª¨ë“ˆ", desc:"ê³µì›ì—ì„œ ìºë¦­í„°ì™€ ìƒí˜¸ì‘ìš©í•˜ë©° ì—°ì•  ì²´í—˜! í•˜íŠ¸ë¥¼ ëª¨ì•„ë³´ì„¸ìš”.",
stories:[
{title:"ì²« ë§Œë‚¨",free:true,log:"ğŸ’Œ ì²« ë§Œë‚¨ ìŠ¤í† ë¦¬ ì™„ë£Œ! í•˜íŠ¸ +1",points:1,item:"í•˜íŠ¸"},
{title:"ë°ì´íŠ¸ ì¤€ë¹„",free:true,log:"ğŸ’Œ ë°ì´íŠ¸ ì¤€ë¹„ ì™„ë£Œ! í•˜íŠ¸ +1",points:1,item:"í•˜íŠ¸"},
{title:"ì˜í™”ê´€ ë°ì´íŠ¸",free:false,log:"ğŸ’Œ ì˜í™”ê´€ ë°ì´íŠ¸ ì™„ë£Œ! í•˜íŠ¸ +2",points:2,item:"í•˜íŠ¸"},
{title:"ê½ƒ ì„ ë¬¼",free:false,log:"ğŸ’Œ ê½ƒ ì„ ë¬¼ ì™„ë£Œ! í•˜íŠ¸ +2",points:2,item:"ê½ƒ"},
{title:"ê³µì› ì‚°ì±…",free:false,log:"ğŸ’Œ ê³µì› ì‚°ì±… ì™„ë£Œ! í•˜íŠ¸ +2",points:2,item:"í•˜íŠ¸"},
{title:"ì¹´í˜ ë°ì´íŠ¸",free:false,log:"ğŸ’Œ ì¹´í˜ ë°ì´íŠ¸ ì™„ë£Œ! í•˜íŠ¸ +2",points:2,item:"ì»¤í”¼"},
{title:"ì„œí”„ë¼ì´ì¦ˆ ì´ë²¤íŠ¸",free:false,log:"ğŸ’Œ ì´ë²¤íŠ¸ ì™„ë£Œ! í•˜íŠ¸ +3",points:3,item:"ì„ ë¬¼"},
{title:"ë°¤í•˜ëŠ˜ ê´€ëŒ",free:false,log:"ğŸ’Œ ë°¤í•˜ëŠ˜ ê´€ëŒ ì™„ë£Œ! í•˜íŠ¸ +2",points:2,item:"í•˜íŠ¸"},
{title:"ì˜í™” ê°ìƒ",free:false,log:"ğŸ’Œ ì˜í™” ê°ìƒ ì™„ë£Œ! í•˜íŠ¸ +2",points:2,item:"í•˜íŠ¸"},
{title:"ì»¤í”Œì‚¬ì§„ ì°ê¸°",free:false,log:"ğŸ’Œ ì»¤í”Œì‚¬ì§„ ì™„ë£Œ! í•˜íŠ¸ +2",points:2,item:"ì‚¬ì§„"}
]},
space:{title:"ìš°ì£¼ì²´í—˜ ëª¨ë“ˆ", desc:"íƒì‚¬ì„  íƒ‘ìŠ¹ â†’ í–‰ì„± íƒí—˜ â†’ ì§€ë„, ì•„ì´í…œ ìˆ˜ì§‘!",
stories:[
{title:"ê¸°ì§€ ì¶œë°œ",free:true,log:"ğŸª ê¸°ì§€ ì¶œë°œ ì™„ë£Œ! +1ì ",points:1,item:"ì§€ë„"},
{title:"ìš°ì£¼ì„  íƒ‘ìŠ¹",free:true,log:"ğŸª ìš°ì£¼ì„  íƒ‘ìŠ¹ ì™„ë£Œ! +1ì ",points:1,item:"ì—°ë£Œ"},
{title:"í™”ì„± ì°©ë¥™",free:false,log:"ğŸª í™”ì„± íƒí—˜ ì™„ë£Œ! +3ì ",points:3,item:"í™”ì„± ìƒ˜í”Œ"},
{title:"ëª©ì„± ê´€ì¸¡",free:false,log:"ğŸª ëª©ì„± ê´€ì¸¡ ì™„ë£Œ! +2ì ",points:2,item:"ëª©ì„± ì§€ë„"},
{title:"í† ì„± ë§ íƒí—˜",free:false,log:"ğŸª í† ì„± ë§ íƒí—˜ ì™„ë£Œ! +2ì ",points:2,item:"í† ì„± ìƒ˜í”Œ"},
{title:"ì†Œí–‰ì„± ìˆ˜ì§‘",free:false,log:"ğŸª ì†Œí–‰ì„± ìˆ˜ì§‘ ì™„ë£Œ! +3ì ",points:3,item:"ì†Œí–‰ì„±"},
{title:"ìš°ì£¼ì •ê±°ì¥ ë°©ë¬¸",free:false,log:"ğŸª ìš°ì£¼ì •ê±°ì¥ ì™„ë£Œ! +2ì ",points:2,item:"ì§€ë„"},
{title:"ë¸”ë™í™€ ê´€ì¸¡",free:false,log:"ğŸª ë¸”ë™í™€ ê´€ì¸¡ ì™„ë£Œ! +4ì ",points:4,item:"ë°ì´í„°"},
{title:"ì™¸ê³„ ìƒëª…ì²´ íƒì‚¬",free:false,log:"ğŸª ì™¸ê³„ íƒì‚¬ ì™„ë£Œ! +5ì ",points:5,item:"ìƒ˜í”Œ"},
{title:"ì€í•˜ íƒí—˜",free:false,log:"ğŸª ì€í•˜ íƒí—˜ ì™„ë£Œ! +5ì ",points:5,item:"ì§€ë„"}
]},
hobby:{title:"ì·¨ë¯¸ ëª¨ë“ˆ", desc:"ìˆ²ì† ì‚°ì±…ê³¼ ì·¨ë¯¸ í™œë™ VR ì²´í—˜! ê½ƒê³¼ ì»¤í”¼ë¥¼ ìˆ˜ì§‘í•˜ì„¸ìš”.",
stories:[
{title:"ìˆ²ì† ì‚°ì±…",free:true,log:"ğŸŒ³ ìˆ²ì† ì‚°ì±… ì™„ë£Œ! +1ì ",points:1,item:"ê½ƒ"},
{title:"ì»¤í”¼ ë§Œë“¤ê¸°",free:true,log:"â˜• ì»¤í”¼ ë§Œë“¤ê¸° ì™„ë£Œ! +1ì ",points:1,item:"ì»¤í”¼"},
{title:"ê·¸ë¦¼ ê·¸ë¦¬ê¸°",free:false,log:"ğŸ¨ ê·¸ë¦¼ ê·¸ë¦¬ê¸° ì™„ë£Œ! +2ì ",points:2,item:"ê·¸ë¦¼"},
{title:"ì‚¬ì§„ ì´¬ì˜",free:false,log:"ğŸ“· ì‚¬ì§„ ì´¬ì˜ ì™„ë£Œ! +2ì ",points:2,item:"ì‚¬ì§„"},
{title:"ê½ƒê½‚ì´",free:false,log:"ğŸŒ¸ ê½ƒê½‚ì´ ì™„ë£Œ! +2ì ",points:2,item:"ê½ƒ"},
{title:"ìš”ë¦¬ ì²´í—˜",free:false,log:"ğŸ³ ìš”ë¦¬ ì²´í—˜ ì™„ë£Œ! +3ì ",points:3,item:"ìš”ë¦¬"},
{title:"ì•…ê¸° ì—°ì£¼",free:false,log:"ğŸµ ì•…ê¸° ì—°ì£¼ ì™„ë£Œ! +3ì ",points:3,item:"ì•…ê¸°"},
{title:"ë‚šì‹œ ì²´í—˜",free:false,log:"ğŸ£ ë‚šì‹œ ì™„ë£Œ! +2ì ",points:2,item:"ë¬¼ê³ ê¸°"},
{title:"ìì „ê±° ì—¬í–‰",free:false,log:"ğŸš´ ìì „ê±° ì—¬í–‰ ì™„ë£Œ! +2ì ",points:2,item:"ì§€ë„"},
{title:"ìº í•‘ ì²´í—˜",free:false,log:"ğŸ• ìº í•‘ ì™„ë£Œ! +3ì ",points:3,item:"ìº í•‘ìš©í’ˆ"}
]}
};

function selectModule(name){
currentModule=name;
moduleTitle.textContent=modules[name].title;
moduleDesc.textContent=modules[name].desc;
storyList.innerHTML="";
modules[name].stories.forEach((s,i)=>{
  const btn=document.createElement("button");
  btn.textContent=s.title + (s.free?" (ë¬´ë£Œ)":" (Pi ê²°ì œ)");
  btn.style.display="block";
  btn.addEventListener("click",()=>{
    if(!s.free && !confirm("ìœ ë£Œ ì²´í—˜ì…ë‹ˆë‹¤. Pi ê²°ì œë¡œ ì§„í–‰í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) return;
    points+=s.points; items.push(s.item); updateScore();
    logQuest(s.log);
    completedStories.push(s.title);
  });
  storyList.appendChild(btn);
});
startVRBtn.style.display="inline-block";
backBtn.style.display="inline-block";
logMessages=[]; questLog.innerHTML="";
}

document.getElementById("loveModule").addEventListener("click",()=>selectModule("love"));
document.getElementById("spaceModule").addEventListener("click",()=>selectModule("space"));
document.getElementById("hobbyModule").addEventListener("click",()=>selectModule("hobby"));

// VR ì²´í—˜
startVRBtn.addEventListener("click",()=>{
moduleScreen.style.display="none";
vrScreen.style.display="flex";
moduleContent.innerHTML="";
vrSky.setAttribute("color","#ECECEC");
const mod=modules[currentModule];
vrSky.setAttribute("color",currentModule==="love"?"#FFC0CB":currentModule==="space"?"#000022":"#A0E0A0");
mod.stories.forEach((s)=>{
  const el=document.createElement("a-box");
  el.setAttribute("position",(Math.random()*4-2)+" 0.5 "+(Math.random()*-4-2));
  el.setAttribute("depth","0.5"); el.setAttribute("height","0.5"); el.setAttribute("width","0.5");
  el.setAttribute("color",s.free?"green":"red");
  el.addEventListener("click",()=>{
    points+=s.points; items.push(s.item); updateScore(); logQuest(s.log);
    el.setAttribute("color","#FFFF00");
  });
  moduleContent.appendChild(el);
});
});

// ë’¤ë¡œê°€ê¸°
backBtn.addEventListener("click",()=>{
moduleScreen.style.display="none";
homeScreen.style.display="flex";
backBtn.style.display="none";
startVRBtn.style.display="none";
moduleContent.innerHTML="";
logMessages=[]; questLog.innerHTML="";
statusEl.textContent="ìƒíƒœ: ëŒ€ê¸° ì¤‘";
});
backVRBtn.addEventListener("click",()=>{
vrScreen.style.display="none";
moduleScreen.style.display="flex";
moduleContent.innerHTML="";
logMessages=[]; questLog.innerHTML="";
});

</script>
</body>
</html>
