<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>Me2Verse VR ë©”íƒ€ë²„ìŠ¤ ì™„ì„±í˜•</title>
<script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
<style>
  body {margin:0;padding:0;font-family:Arial,sans-serif;background:#f0f0f0;}
  #status{position:fixed;top:10px;left:50%;transform:translateX(-50%);background:rgba(255,255,255,0.85);padding:5px 10px;border-radius:5px;font-size:16px; z-index:5;}
  #score{position:fixed;bottom:10px;left:50%;transform:translateX(-50%);background:rgba(0,0,0,0.6);color:white;padding:5px 10px;border-radius:5px;font-size:16px; z-index:5;}
  .screen{width:100%;height:100vh;display:flex;justify-content:center;align-items:center;flex-direction:column;transition:all 0.5s;position:absolute;top:0;left:0;}
  #homeScreen{background:white; z-index:3;}
  #moduleScreen{background:#fafafa;display:none; z-index:2;}
  #storyScreen{background:#fff;display:none; z-index:4; padding:10px; overflow-y:auto;}
  #vrScreen{background:black;display:none; z-index:1;}
  input,select,button{padding:10px 15px;margin:5px;font-size:16px;border-radius:5px;border:1px solid #ccc;}
  button{cursor:pointer;border:none;color:white;}
  #autoBtn{background-color:#2196F3;}
  .moduleBtn{background-color:#4CAF50;}
  #startVRBtn{background-color:#9C27B0;display:none;margin-top:10px;}
  #backBtn{background-color:#FF5722;display:none;margin-top:15px;}
  #questLog{margin-top:15px;background:rgba(255,255,255,0.8);padding:10px;border-radius:5px;width:80%;max-width:400px;font-size:14px;max-height:150px;overflow-y:auto;}
  a-scene{width:100%;height:100vh;}
  #flagContainer{display:flex; justify-content:space-between; width:100%; max-width:400px; margin-bottom:10px;}
  #flagContainer img{width:80px;}
</style>
</head>
<body>

<div id="status">ìƒíƒœ: ëŒ€ê¸° ì¤‘</div>
<div id="score">í¬ì¸íŠ¸: 0 | ì•„ì´í…œ: ì—†ìŒ</div>

<!-- í™ˆ í™”ë©´ -->
<div id="homeScreen" class="screen">
  <div id="flagContainer">
    <img src="https://upload.wikimedia.org/wikipedia/commons/0/09/Flag_of_South_Korea.svg" alt="íƒœê·¹ê¸°">
    <img src="https://upload.wikimedia.org/wikipedia/commons/0/09/Flag_of_South_Korea.svg" alt="íƒœê·¹ê¸°">
  </div>
  <h1>ğŸš€ Me2Verse VR ë©”íƒ€ë²„ìŠ¤</h1>
  <p>ë¡œê·¸ì¸ â†’ ëª¨ë“ˆ ì„ íƒ â†’ ìŠ¤í† ë¦¬ ì²´í—˜ â†’ VR ì²´í—˜</p>
  <input type="text" id="username" placeholder="Pi ë„¤íŠ¸ì›Œí¬ ê³„ì • ì…ë ¥">
  <button id="autoBtn">ë¡œê·¸ì¸</button>
</div>

<!-- ëª¨ë“ˆ ì„ íƒ í™”ë©´ -->
<div id="moduleScreen" class="screen">
  <h2>ëª¨ë“ˆ ì„ íƒ</h2>
  <div id="moduleButtonsDiv">
    <button class="moduleBtn" id="loveModule">ì—°ì•  ëª¨ë“ˆ</button>
    <button class="moduleBtn" id="spaceModule">ìš°ì£¼ì²´í—˜ ëª¨ë“ˆ</button>
    <button class="moduleBtn" id="hobbyModule">ì·¨ë¯¸ ëª¨ë“ˆ</button>
  </div>
  <button id="backBtn">ğŸ  í™ˆìœ¼ë¡œ</button>
</div>

<!-- ìŠ¤í† ë¦¬ í™”ë©´ -->
<div id="storyScreen" class="screen">
  <h3 id="storyTitle"></h3>
  <div id="storyContent"></div>
  <button id="startVRBtn">VR ì²´í—˜ ì‹œì‘</button>
  <button id="storyBackBtn">ğŸ  ëª¨ë“ˆ ì„ íƒìœ¼ë¡œ</button>
  <div id="questLog"></div>
</div>

<!-- VR í™”ë©´ -->
<div id="vrScreen" class="screen">
  <a-scene id="vrScene">
    <a-sky id="vrSky" color="#ECECEC"></a-sky>
    <a-entity id="moduleContent"></a-entity>
    <a-entity id="cameraRig" position="0 1.6 0">
      <a-camera wasd-controls look-controls>
        <a-cursor color="black"></a-cursor>
      </a-camera>
    </a-entity>
    <a-entity light="type: ambient; intensity:0.6"></a-entity>
    <a-entity light="type: directional; intensity:0.8" position="1 2 1"></a-entity>
  </a-scene>
  <button id="vrBackBtn" style="position:fixed;bottom:20px;right:20px;background:#FF5722;">ğŸ  ë’¤ë¡œê°€ê¸°</button>
</div>

<script>
// ìƒíƒœ, ì ìˆ˜
const statusEl=document.getElementById("status");
const scoreEl=document.getElementById("score");
let points=0, items=[], currentModule="", currentStory=0;
function updateScore(){ scoreEl.textContent=`í¬ì¸íŠ¸: ${points} | ì•„ì´í…œ: ${items.length?items.join(", "):"ì—†ìŒ"}`; }

// ë¡œê·¸ì¸
document.getElementById("autoBtn").addEventListener("click",()=>{
  const username=document.getElementById("username").value.trim();
  if(!username){ alert("ê³„ì • ì…ë ¥ í•„ìš”!"); return; }
  statusEl.textContent=`ìƒíƒœ: ${username} ë¡œê·¸ì¸ ì„±ê³µ! ğŸ‰`;
  document.getElementById("homeScreen").style.display="none";
  document.getElementById("moduleScreen").style.display="flex";
});

// ëª¨ë“ˆ ì •ì˜
const modules={
love:{title:"ì—°ì•  ëª¨ë“ˆ", sky:"#FFC0CB", avatars:[
  {type:"a-box", pos:"0 0 -3", points:10, item:"í•˜íŠ¸", log:"ğŸ’Œ ìºë¦­í„°ì™€ ëŒ€í™” ì™„ë£Œ +10ì "}
], stories:[
  {text:"ê³µì›ì—ì„œ ì²« ë§Œë‚¨", log:"ì²« ë§Œë‚¨ +10ì ", points:10, item:"í•˜íŠ¸"},
  {text:"ì¹´í˜ì—ì„œ ì»¤í”¼", log:"ì»¤í”¼ ë§ˆì‹œê¸° +5ì ", points:5},
  {text:"ë†€ì´ê³µì› ì²´í—˜", log:"ë†€ì´ê¸°êµ¬ íƒ€ê¸° +10ì ", points:10, item:"ê¸°ë…í’ˆ"},
  {text:"ì˜í™”ê´€ ë°ì´íŠ¸", log:"ì˜í™” ë³´ê¸° +5ì ", points:5},
  {text:"ë°¤ ì‚°ì±…", log:"ë°¤ ì‚°ì±… +5ì ", points:5},
  {text:"ê³µì› ë²¤ì¹˜ì—ì„œ ëŒ€í™”", log:"ëŒ€í™” +5ì ", points:5},
  {text:"ê°•ë³€ ë“œë¼ì´ë¸Œ", log:"ë“œë¼ì´ë¸Œ +5ì ", points:5},
  {text:"ê½ƒ ì„ ë¬¼ ì£¼ê¸°", log:"ê½ƒ íšë“ +10ì ", points:10, item:"ê½ƒ"},
  {text:"í¬í† íƒ€ì„", log:"ì‚¬ì§„ ì´¬ì˜ +5ì ", points:5},
  {text:"ë°ì´íŠ¸ ë§ˆë¬´ë¦¬", log:"ë°ì´íŠ¸ ì¢…ë£Œ +10ì ", points:10}
]},
space:{title:"ìš°ì£¼ì²´í—˜ ëª¨ë“ˆ", sky:"#000022", avatars:[
  {type:"a-sphere", pos:"0 1.5 -4", points:15, item:"í–‰ì„± ì§€ë„", log:"ğŸª í–‰ì„± íƒí—˜ ì™„ë£Œ +15ì "}
], stories:[
  {text:"íƒì‚¬ì„  íƒ‘ìŠ¹", log:"íƒ‘ìŠ¹ +5ì ", points:5},
  {text:"ì²« í–‰ì„± íƒí—˜", log:"í–‰ì„± íƒí—˜ +10ì ", points:10, item:"ì§€ë„"},
  {text:"ìœ„ì„± ê´€ì°°", log:"ìœ„ì„± ê´€ì°° +5ì ", points:5},
  {text:"ìš°ì£¼ ë¯¸ì…˜ ìˆ˜í–‰", log:"ë¯¸ì…˜ ì™„ë£Œ +15ì ", points:15, item:"ë³´ë¬¼"},
  {text:"ì€í•˜ íƒì‚¬", log:"ì€í•˜ íƒì‚¬ +10ì ", points:10},
  {text:"ë¸”ë™í™€ ê´€ì°°", log:"ë¸”ë™í™€ +20ì ", points:20},
  {text:"ìœ ì„±ìš° ê´€ì¸¡", log:"ìœ ì„±ìš° +5ì ", points:5},
  {text:"ì™¸ê³„ ë¬¸ëª… ë°œê²¬", log:"ì™¸ê³„ë¬¸ëª… +15ì ", points:15, item:"ë°ì´í„°"},
  {text:"ìš°ì£¼ ì‚¬ì§„ ì´¬ì˜", log:"ì‚¬ì§„ ì´¬ì˜ +5ì ", points:5},
  {text:"ê·€í™˜", log:"ê·€í™˜ ì™„ë£Œ +10ì ", points:10}
]},
hobby:{title:"ì·¨ë¯¸ ëª¨ë“ˆ", sky:"#A0E0A0", avatars:[
  {type:"a-cone", pos:"-1 0.5 -3", points:5, item:"ê½ƒ", log:"ğŸŒ³ ì‚°ì±… ì™„ë£Œ +5ì "}
], stories:[
  {text:"ìˆ²ì† ì‚°ì±…", log:"ì‚°ì±… +5ì ", points:5},
  {text:"ì»¤í”¼ ë§Œë“¤ê¸°", log:"ì»¤í”¼ ì œì‘ +5ì ", points:5, item:"ì»¤í”¼"},
  {text:"ê½ƒ ê´€ì°°", log:"ê½ƒ ê´€ì°° +5ì ", points:5, item:"ê½ƒ"},
  {text:"ì‚¬ì§„ ì´¬ì˜", log:"ì‚¬ì§„ +5ì ", points:5},
  {text:"ê·¸ë¦¼ ê·¸ë¦¬ê¸°", log:"ê·¸ë¦¼ +5ì ", points:5, item:"ê·¸ë¦¼"},
  {text:"ì±… ì½ê¸°", log:"ë…ì„œ +5ì ", points:5},
  {text:"ë² ì´í‚¹", log:"ë² ì´í‚¹ +5ì ", points:5, item:"ì¿ í‚¤"},
  {text:"ì•…ê¸° ì—°ì£¼", log:"ì—°ì£¼ +5ì ", points:5},
  {text:"DIY í”„ë¡œì íŠ¸", log:"DIY ì™„ë£Œ +5ì ", points:5, item:"ì‘í’ˆ"},
  {text:"íœ´ì‹", log:"íœ´ì‹ ì™„ë£Œ +5ì ", points:5}
]}
};

// ëª¨ë“ˆ ì„ íƒ
const moduleBtns=["loveModule","spaceModule","hobbyModule"];
moduleBtns.forEach(id=>{
  document.getElementById(id).addEventListener("click",()=>{
    currentModule=id.replace("Module","");
    currentStory=0;
    document.getElementById("moduleScreen").style.display="none";
    document.getElementById("storyScreen").style.display="flex";
    loadStory();
  });
});

// ìŠ¤í† ë¦¬ í™”ë©´ ìš”ì†Œ
const storyTitle=document.getElementById("storyTitle");
const storyContent=document.getElementById("storyContent");
const startVRBtn=document.getElementById("startVRBtn");
const storyBackBtn=document
