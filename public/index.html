<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Me2Verse-1 Pi 로그인 테스트</title>
<script src="https://cdn.jsdelivr.net/npm/pi-js@latest/dist/pi.min.js"></script>
<style>
  body { font-family: Arial, sans-serif; padding: 20px; }
  button { font-size: 18px; padding: 12px 24px; margin: 10px; }
  #status { margin-top: 20px; font-weight: bold; }
</style>
</head>
<body>

<h1>Me2Verse-1 Pi 로그인 테스트</h1>

<button id="loginBtn" disabled>로그인</button>
<div id="status">SDK 초기화 중...</div>

<script>
  window.addEventListener('load', () => {
    const isSandbox = window.location.hostname === 'sandbox.minepi.com';
    Pi.init({ version: "2.0", sandbox: isSandbox });

    const loginBtn = document.getElementById('loginBtn');
    const status = document.getElementById('status');

    status.innerText = `✅ SDK 초기화 완료 (${isSandbox ? '샌드박스' : '프로덕션'})`;
    loginBtn.disabled = false;

    loginBtn.addEventListener('click', async () => {
      status.innerText = '로그인 시도 중...';
      loginBtn.disabled = true;

      try {
        const auth = await Pi.authenticate(['username']);
        status.innerText = `로그인 성공: ${auth.user.username}`;
      } catch (err) {
        status.innerText = `로그인 실패: ${err.message}`;
        loginBtn.disabled = false;
      }
    });
  });
</script>

</body>
</html>
