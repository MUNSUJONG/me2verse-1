<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Me2verse-1</title>
<style>
body { margin:0; font-family:Arial,sans-serif; background:#eef2f5; color:#333; }
header { background:#ff6f61; color:white; padding:1.5rem; text-align:center; }
nav { display:flex; justify-content:center; gap:1rem; margin:1rem 0; }
nav button { padding:.5rem 1rem; border:none; border-radius:6px; cursor:pointer; font-weight:bold; color:white; }
#btnHobby { background:#4a90e2; } #btnCulture { background:#f5a623; } #btnLove { background:#7ed321; }
nav button:hover { opacity:0.8; }
main { padding:2rem; display:grid; grid-template-columns:repeat(auto-fit, minmax(250px,1fr)); gap:1.5rem; }
.card, .detail { background:white; border-radius:12px; padding:1rem; box-shadow:0 4px 6px rgba(0,0,0,.1); text-align:center; transition: transform .2s; }
.card:hover { transform: scale(1.03); cursor:pointer; }
.card img, .detail img { max-width:100%; border-radius:8px; margin-bottom:.5rem; }
button.back-btn { margin-top:1rem; padding:.5rem 1rem; border:none; border-radius:6px; cursor:pointer; color:white; }
button.back-btn { background:#ff6f61; }
button.back-btn:hover { background:#e65550; }
.simulation { margin-top:1rem; padding:0.5rem; background:#f0f0f0; border-radius:6px; font-weight:bold; }
.choice-btn { margin:0.3rem; padding:0.3rem 0.6rem; border-radius:6px; border:none; cursor:pointer; }
</style>
</head>
<body>
<header>
<h1>🌟 Me2verse-1</h1>
<p>AI 디렉터와 함께하는 몰입형 메타버스</p>
</header>

<nav>
<button id="btnHobby">미투하비</button>
<button id="btnCulture">미투컬쳐</button>
<button id="btnLove">미투러브</button>
</nav>

<main id="root"></main>

<script type="module">
// -------------------- 모듈 데이터 --------------------
const modules = {
  hobby:[
    {name:"자동차",desc:"메타버스 자동차 드라이브",img:"./images/car.jpg",fee:"0.05 Pi",usage:"운전 체험 5분",nft:true},
    {name:"레이싱",desc:"친구들과 레이싱 즐기기",img:"./images/racing.jpg",fee:"0.08 Pi",usage:"레이싱 3분",nft:true},
    {name:"낚시",desc:"가상 호수에서 낚시 체험",img:"./images/fishing.jpg",fee:"0.03 Pi",usage:"낚시 5분",nft:false},
    {name:"캠핑",desc:"메타버스 캠핑 체험",img:"./images/camping.jpg",fee:"0.02 Pi",usage:"캠핑 10분",nft:false}
  ],
  culture:[
    {name:"음악",desc:"메타버스 콘서트 관람",img:"./images/music.jpg",fee:"0.04 Pi",usage:"콘서트 5분",nft:true},
    {name:"영화",desc:"가상 영화관 체험",img:"./images/movie.jpg",fee:"0.03 Pi",usage:"영화 10분",nft:false},
    {name:"전시",desc:"가상 전시회 관람",img:"./images/exhibition.jpg",fee:"0.02 Pi",usage:"전시 7분",nft:false}
  ],
  love:[
    {name:"연애",desc:"가상 연애 체험",img:"./images/love.jpg",fee:"0.05 Pi",usage:"연애 체험 5분",nft:true},
    {name:"결혼",desc:"메타버스 결혼식 체험",img:"./images/wedding.jpg",fee:"0.1 Pi",usage:"결혼식 체험 10분",nft:true}
  ]
};

// -------------------- 렌더 함수 --------------------
const root=document.getElementById("root");

function renderCards(items,moduleName){
  root.innerHTML="";
  items.forEach(item=>{
    const card=document.createElement("div");
    card.className="card";
    card.innerHTML=`<img src="${item.img}" alt="${item.name}"><h2>${item.name}</h2><p>${item.desc}</p><p>사용료: ${item.fee}</p>`;
    card.addEventListener("click",()=>renderDetail(item,moduleName));
    root.appendChild(card);
  });
}

function renderDetail(item,moduleName){
  root.innerHTML="";
  const d=document.createElement("div");
  d.className="detail";
  d.innerHTML=`
    <img src="${item.img}" alt="${item.name}">
    <h2>${item.name}</h2>
    <p>${item.desc}</p>
    <p>사용료: ${item.fee}</p>
    <p>사용방법: ${item.usage}</p>
    <p>NFT 필요: ${item.nft?"예":"아니오"}</p>
    <div class="simulation" id="simulation">AI 디렉터 준비 중...</div>
  `;
  const backBtn=document.createElement("button");
  backBtn.className="back-btn";
  backBtn.textContent="← 돌아가기";
  backBtn.addEventListener("click",()=>renderCards(modules[moduleName],moduleName));
  d.appendChild(backBtn);
  root.appendChild(d);

  // AI 디렉터 호출
  if(moduleName==="love") aiDirectorLoveSimulation(item);
  else aiDirectorSimulation(item,moduleName);
}

// -------------------- AI 디렉터 시뮬레이션 --------------------
function aiDirectorSimulation(item,moduleName){
  const sim=document.getElementById("simulation");
  if(!sim) return;
  let step=0;
  const steps=[];
  if(moduleName==="hobby"){
    steps.push(`AI: ${item.name} 체험 준비 중...`);
    steps.push(`AI: 난이도 조정 완료!`);
    steps.push(`AI: 몰입형 체험 시작!`);
    steps.push(`AI: ${item.name} 체험 완료! NFT: ${item.nft?"예":"아니오"}`);
  } else if(moduleName==="culture"){
    steps.push(`AI: ${item.name} 환경 구성 중...`);
    steps.push(`AI: 몰입도 최적화`);
    steps.push(`AI: 체험 진행 중...`);
    steps.push(`AI: ${item.name} 체험 완료! NFT: ${item.nft?"예":"아니오"}`);
  }
  const interval=setInterval(()=>{
    if(step>=steps.length){clearInterval(interval); return;}
    sim.textContent=steps[step];
    step++;
  },800);
}

// -------------------- 미투러브 확장 --------------------
function aiDirectorLoveSimulation(item){
  const sim=document.getElementById("simulation");
  if(!sim) return;
  let step=0;
  let intimacy=50;
  sim.textContent="AI 디렉터: 연애 시뮬레이션 시작...";

  function nextStep(){
    switch(step){
      case 0:
        sim.textContent="AI: 데이트 장소를 선택하세요!";
        ["카페","공원","영화관"].forEach(place=>{
          const btn=document.createElement("button");
          btn.textContent=place;
          btn.className="choice-btn";
          btn.onclick=()=>{
            intimacy += place==="카페"?5: place==="공원"?3:2;
            sim.textContent=`데이트 선택: ${place} (친밀도 ${intimacy})`;
            step++; setTimeout(nextStep,1000);
          };
          sim.appendChild(btn);
        });
        break;
      case 1:
        sim.innerHTML="AI: 특별 이벤트 발생! 서로 대화를 진행 중...";
        intimacy += Math.floor(Math.random()*10);
        step++; setTimeout(nextStep,1500);
        break;
      case 2:
        if(intimacy>=60){
          sim.textContent=`친밀도 ${intimacy} → 결혼 이벤트 발생! NFT:${item.nft?"예":"아니오"}`;
        } else {
          sim.textContent=`친밀도 ${intimacy} → 추가 연애 체험 필요`;
        }
        break;
    }
  }
  nextStep();
}

// -------------------- 네비 버튼 --------------------
function showModule(moduleName){
  renderCards(modules[moduleName],moduleName);
}

showModule("hobby");
document.getElementById("btnHobby").addEventListener("click",()=>showModule("hobby"));
document.getElementById("btnCulture").addEventListener("click",()=>showModule("culture"));
document.getElementById("btnLove").addEventListener("click",()=>showModule("love"));

</script>
</body>
</html>
