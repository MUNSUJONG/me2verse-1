<button id="loginBtn" disabled>로그인</button>
<p id="status"></p>

<script src="https://sdk.minepi.com/pi-sdk.js"></script>
<script>
  window.onload = () => {
    alert('SDK 초기화 시작');
    Pi.init({ version: "2.0", sandbox: true });
    alert('SDK 초기화 완료');

    const status = document.getElementById('status');
    const loginBtn = document.getElementById('loginBtn');

    loginBtn.disabled = false;

    loginBtn.onclick = async () => {
      alert('로그인 시도');
      try {
        const auth = await Pi.authenticate(['username', 'payments']);
        alert('로그인 성공: ' + auth.user.username);
        status.innerText = '로그인 성공: ' + auth.user.username;
      } catch (e) {
        alert('로그인 실패: ' + e.message);
        status.innerText = '로그인 실패: ' + e.message;
      }
    };
  };
</script>
